





<!doctype html>
<!--[if lt IE 10]><html class="lt-ie9" lang="ko"><![endif]-->
<!--[if gt IE 9]><!--><html lang="ko"><!--<![endif]-->
<html lang="en" xmlns:th="http://www.thymeleaf.org">

	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />

	
	




		<title>MEET PLAY SHARE, 씨네링크</title>
		<meta property="name"			id="metaTagTitle"	content="나의씨네링크"/>
		<meta property="description"	id="metaTagDtls"	content="사람들과 공유할 수 있는, 공간경험을 만듭니다."/>
		<meta property="keywords"		id="metaTagKeyword"	content="씨네링크,megabox,영화,영화관,극장,티켓,박스오피스,상영예정작,예매,오페라,싱어롱,큐레이션,필름소사이어티,클래식소사이어티,이벤트,Movie,theater,Cinema,film,CINELINK"/>

		<meta property="fb:app_id" 		id="fbAppId" 	content="546913502790694"/>
		

		<meta property="og:site_name" 	id="fbSiteName"	content="씨네링크"/>
		<meta property="og:type" 		id="fbType"		content="movie"/>
		<meta property="og:url" 		id="fbUrl"		content="https://www.megabox.co.kr/mypage" />
		<meta property="og:title" 		id="fbTitle"	content="나의씨네링크" />
		<meta property="og:description"	id="fbDtls"		content="사람들과 공유할 수 있는, 공간경험을 만듭니다."/>
		<meta property="og:image" 		id="fbImg"		content="https://img.megabox.co.kr/SharedImg/metaTag/2020/02/04/gFfTzMwwiCxhBwcUV5TRGMFX9Cmoj64W.jpg" />
		

	
	<link rel="shortcut icon" href="/static/pc/images/favicon.ico" />
</head>




    	
    	<link rel="stylesheet" href="/mypage/css/mypage.css" media="all">
    	<link rel="stylesheet" href="/mypage/css/list.css" media="all">
    	<!-- 마이페이지 css -->
    	<!-- Global site tag (gtag.js) - Google Analytics -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=UA-30006739-3"></script>
		<script>window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-30006739-3');</script>
		<script src="/mypage/js/mypage.js"></script>
		<script src="/js/common/dist/cinelink.common.min.js"></script>
    	<script src="/js/netfunnel/dist/cinelink.netfunnel.min.js"></script>
    	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
	<script src="/mypage/js/loginCheck.js"></script>
	
	

<script type="text/javascript">
    var _init = {
        cache	: Date.now(),
        path	: '/static/pc/js/'
    };
    document.write(
        '<script src="'+_init.path+'ui.common.js?v='+_init.cache+'"><\/script>'+
        '<script src="'+_init.path+'front.js?v='+_init.cache+'"><\/script>'
    );

    //RedirectException 발생시 메시지 처리
    

    //링크 구분에 따라 url 이동을 한다.
    function fn_goMoveLink(link_gbn, link_url) {
        alert("link_gbn : " + link_gbn + " , link_url : " + link_url + " 준비중 입니다");
        return;
    }
</script>
<script type="text/javascript">

	var locationIdx;

	$(document).ready(function(){

		// 탭변경
		$('#contents .tab-block li').click(function() {

			var $div  = $('#myLoaction div.location');
			var $this = $(this);
			var url   = $(this).data('url');
			var tit   = $(this).data('tit');

			// 탭 제목
			if (tit == undefined) tit = $this.text();

			// 탭정보 설정
			if ($div.find('a').length == locationIdx) {
				$div.append($('<a>').attr({'href': url, 'title' : tit + ' 페이지로 이동'}).html(tit));
			} else {
				$div.find('a').eq(locationIdx).attr({'href': url, 'title' : tit + ' 페이지로 이동'}).html(tit);
			}

			// URL 주소 변경
			//history.replaceState( null, null, url );
		});

		// 탭을 위한 기본 갯수
		locationIdx = $('#myLoactionInfo div.location a').length;

		// 기본 location
		$('#myLoaction').html($('#myLoactionInfo div.location').clone());
	});

</script>
<body>


<script src="/mypage/js/like.js"></script>
    <div class="skip" title="스킵 네비게이션">
        <a href="#contents"	title="본문 바로가기">본문 바로가기</a>
        <a href="#footer"	title="푸터 바로가기">푸터 바로가기</a>
    </div>
    <div class="body-wrap">
        







<!--  ko_KR -->
        
<!-- <script async defer src="https://connect.facebook.net/en_US/sdk.js"></script>
<script type="text/javascript" src="https://static.nid.naver.com/js/naveridlogin_js_sdk_2.0.0.js" charset="utf-8"></script> -->
<script src="/static/mb/js/hmac-sha256.js"></script>
<!-- 주석 <script src="/static/mb/js/enc-base64-min.js"></script>
<script src="/js/megabox-simpleBokd.js"></script> -->
<script type="text/javascript">
/*전역변수
아이디
패스워드  입력 완료 체크 변수 필요
*/
var sValidateLoginIdAt  = 'N';	//로그인ID  입력 검증 여부
var sValidateLoginPwdAt = 'N';	//로그인PWD 입력 검증 여부
var submitIng = false;
var sCookieVal = "";	//쿠키값
/*
window.fbAsyncInit = function() {
	FB.init({
    	appId            : '',
      	autoLogAppEvents : true,
      	xfbml            : true,
      	version          : ''
   });
};

var naverLogin = new naver.LoginWithNaverId({
	clientId: '',
	callbackUrl: location.href,
	isPopup: false,
	callbackHandle: false
	// callback 페이지가 분리되었을 경우에 callback 페이지에서는 callback처리를 해줄수 있도록 설정합니다.
});
*/

$(function(){
	/*로그인 버튼 비활성*/
	$("#btnLogin").attr("disabled", true);

	/*쿠키조회 pc 아이디값 입력 및 자동로그인 체크*/
	sCookieVal = fn_getCookie('loginId');
	if (!(sCookieVal == null || sCookieVal == "")){
		$("#ibxLoginId").val(sCookieVal);
		$("input:checkbox[id='chkIdSave']").prop("checked",true);
		fn_validateInputVal("loginId",sCookieVal);
	}

	/*이벤트*/
	/*로그인*/
	$("#btnLogin").click(function(){
		var sLoginId   = $("#ibxLoginId").val();
		var sLloginPwd = $("#ibxLoginPwd").val();

// 		//아이디 생성규칙 확인
// 		if(!fn_validateInputVal("loginId" ,$("#ibxLoginId").val(), 'Y')) {
// 			$("#ibxLoginId").focus();
// 			return;
// 		}
// 		//패스워드 생성규칙확인
// 		if(!fn_validateInputVal("loginPwd",$("#ibxLoginPwd").val(), 'Y')) {
// 			$("#ibxLoginPwd").focus();
// 			return;
// 		}

		$('#error-text').text('');

		//아이디 저장 버튼 체크시 쿠키 설정
		if($("input:checkbox[id='chkIdSave']").is(":checked")){
			fn_setCookie('loginId',$("#ibxLoginId").val(),730);
		}
		//아이디 저장 체크 안했을때 쿠키 삭제
		else if(!$("input:checkbox[id='chkIdSave']").is(":checked")){
			fn_deleteCookie('loginId');
		}

		fn_selectMbLogin(sLoginId, sLloginPwd);	//로그인
	});

	/*아이디 입력시 체크 */
	$("#ibxLoginId").on("keyup", function(e){
		if(fn_validateInputVal("loginId", $(this).val())){
			if(e.keyCode == 13){$("#btnLogin").click();}
		} else {
			if(e.keyCode == 13){$("#ibxLoginPwd").focus();}
		}

		return;
	});

	/*비밀번호 입력체크 */
	$("#ibxLoginPwd").on("keyup", function(e){
		if(fn_validateInputVal("loginPwd", $(this).val())){
			if(e.keyCode == 13){$("#btnLogin").click();}
		}
		return;
	});


	// 페이스북 로그인
	$('.login-facebook').on('click', function(e) {
		e.preventDefault();

		var type = $(this).data('type');

		FB.login(function(response){
			if(response.authResponse.userID) {
				$.ajaxMegaBox({
					url: '/on/oh/ohg/MbLogin/selectMbSimpleLogin.rest',
					data: JSON.stringify({ simpleLoginId: response.authResponse.userID, type: type }),
					success: function (data) {
						if(data.result) {
							AppHandler.Common.goMain();  // 메인페이지로 이동
						} else {
							AppHandler.Common.alert('본 서비스는 씨네링크 회원인 경우에만  이용하실 수 있습니다.\n회원가입 후 이용 부탁 드립니다.');
						}
					}
				});
			}
		});
	});
});

//쿠키설정
function fn_setCookie(cname, cvalue, exdays) {
	var d = new Date();
	d.setTime(d.getTime() + (exdays*24*60*60*1000));
	var expires = "expires="+d.toUTCString();
	document.cookie = cname + "=" + cvalue + "; " + expires + ";path=/";
}

//쿠키조회
function fn_getCookie(name) {
	var value = document.cookie.match('(^|;) ?' + name + '=([^;]*)(;|$)');
	return value? value[2] : null;

}

//쿠키삭제
function fn_deleteCookie(name){
	var d = new Date();
	d.setTime(d.getDate() -1);
	var expires = "expires="+d.toUTCString();
	document.cookie = name + "=;" + expires + ";path=/";
}


//입력 문자 체크
function fn_validateInputVal(type,sVal,submitAt){
	if(type == "loginId") {		  //아이디

		if(sVal == ""){
			sValidateLoginIdAt = 'N';
		}
// 		if (!/((?=.{8,})(?=.*[0-9])(?=.*[a-zA-Z]).*$)/g.test(sVal)) {
// 			$('#error-text').text('아이디는 영문,숫자 조합 8자리 이상 12자리 이하 입니다.');
// 			sValidateLoginIdAt = 'N';
// 		}
// 		else if (/((?=.{8,})(?=.*[~!@#$%^&*+=-]).*$)/g.test(sVal)) {
// 			$('#error-text').text('아이디는 영문,숫자 조합 8자리 이상 12자리 이하 입니다.');
// 			sValidateLoginIdAt = 'N';
// 		}
		else{
			$('#error-text').text('');
			sValidateLoginIdAt = 'Y';
		}
	}
	else if(type == "loginPwd") { //패스워드
		if(sVal == ""){
			sValidateLoginPwdAt = 'N';
		}
// 		if (!/((?=.{10,})(?=.*[0-9])(?=.*[a-zA-Z]).*$)|((?=.{10,})(?=.*[~!@#$%^&*+=-])(?=.*[a-zA-Z]).*$)|((?=.{10,})(?=.*[!@#$%^&*+=-])(?=.*[0-9]).*$)/g.test(sVal)) {
// 			$('#error-text').text('비밀번호는 영문,숫자,특수기호 중 2가지 이상 조합하여 10자리 이상 16자리 이하 입니다.');
// 			sValidateLoginPwdAt = 'N';
// 		}
		else {
			$('#error-text').text('');
			sValidateLoginPwdAt = 'Y';
		}
	}

	if(submitAt != 'Y'){
		if(sValidateLoginIdAt == 'Y' && sValidateLoginPwdAt =='Y') {
			$("#btnLogin").attr("disabled", false);	//버튼활성화
		}
		else {
			$("#btnLogin").attr("disabled", true);	//버튼비활성화
		}
	}

	if(sValidateLoginIdAt == 'N' || sValidateLoginPwdAt =='N') {
		return false;
	}

	return true;
}


//패스워드 3개월 초과시 다음에 하기 버튼 누를경우 비밀번호 변경일자 오늘날자로 셋팅
//비번 재설정은 3개월 미변경시, 변경 안하면 로그인 할때마다 alert 나옴 20190507
function fn_updatePwdUptDt(sLoginId){
	var paramData = { loginId:sLoginId };
	$.ajaxMegaBox({
		url: "/on/oh/ohg/MbLogin/updateMbPwdReSet.rest",
		type: "POST",
		contentType: "application/json;charset=UTF-8",
		dataType: "json",
		data: JSON.stringify(paramData),
		success: function (data, textStatus, jqXHR) {
			//메인 화면으로 이동
			$(location).attr('href','/main');
		},
		error: function(xhr,status,error){
			var err = JSON.parse(xhr.responseText);
			alert(xhr.status);
			alert(err.message);
		}
	});
}

// 광고 쿠키 싱크 전달
function fn_adSetCookie(adMap){

	var adUrl = "https://ad.imp.joins.com/setcookie/megabox?gender=" + adMap.gender + "&birthday=" + adMap.birthday + "&genre=" + adMap.genre + "&theater=" + adMap.theater;
	if (document.domain.indexOf('t-') == -1){
		$.ajax({
			type: "get"
			, url: adUrl
			, data: ""
			, async : false
			, success: function(result) {
			console.log(result);
			}
			, error: function(err) {
			  console.log('error : ' + err.status);
			}
		});
	}

}

//로그인
function fn_selectMbLogin(sLoginId, sLloginPwd, snsLoginAt, redisKey){
	if(submitIng) return;

	/* 폼데이터 초기화 */
	$('#loginForm input[name=certType]').val();								//본인인증 모듈 코드값 초기화
	var sMenuId = $('input[name=menuId]').val();							//호출화면id
	var sMappingId = $('input[name=mappingId]').val();						//리턴URL
	var sSnsLogin = typeof snsLoginAt == 'undefined' ? "N" : snsLoginAt;	//sns로그인 여부

	var validLoginId  = sLoginId != null ? sLoginId.replace(/ /gi,"") : "";
	var validLoginPwd = sLloginPwd != null ? sLloginPwd.replace(/ /gi,"") : "";

	if(validLoginPwd != "simpleLogin"){
		if(validLoginId == "" || validLoginPwd == ""){
			gfn_alertMsgBoxSize('로그인 정보를 입력해 주세요.',400,250);	//로그인 정보를 입력해 주세요.
			return;
		}
	}

	var paramData = { loginId:sLoginId
					, loginPwd:sLloginPwd
					, menuId:sMenuId
					, mappingId:sMappingId
					, snsLogin:sSnsLogin
					, redisKey:redisKey
					};
	$.ajaxMegaBox({
		url: "/on/oh/ohg/MbLogin/selectMbLoginInfo.rest",
		data: JSON.stringify(paramData),
		//async: false,
		success: function (data, textStatus, jqXHR) {
			var revStr                 = data.revStr;
			var redisKey               = data.redisKey;
			var pwdErrCnt              = data.pwdErrCnt+1;
			var loginPwdLstUptDt       = data.loginPwdLstUptDt;
			var pwdUptDayco            = data.pwdUptDayco;
			var menuId                 = data.menuId;
			var mappingId              = data.mappingId;
			var marketRcvStr           = data.marketRcvStr
			var loginIdStar            = data.loginIdStar;

			//비밀번호 5회 오류	//본인인증 수단 선택 M-ME-DA-01
			if (revStr == "acctLock") {
				$('#loginForm input[name=redisKey]').attr('value',redisKey);
				$('#loginForm input[name=certType]').attr('value','SCRC05');
				var options = {};
				options.msg = '로그인정보가 5회 이상 잘못 입력되었습니다.\n회원인증 후 새로운 비밀번호를 설정해 주세요.';	//비밀번호 5회 이상 잘못 입력되었습니다.\n본인인증 후 새로운 비밀번호를 설정해 주세요.
				options.callback  = fn_mvPage;
				options.param = {confirm:'/on/oh/ohg/MbLogin/viewMbSimpleCertPage.rest'};	//간편인증페이지
				options.minWidth  = 400;
				options.minHeight = 250;
				gfn_alertMsgBox(options);
				return;
			}
			//비밀번호 변경9개월 초과 //비밀번호 재설정 M-ME-FI-04	비밀번호변경 9개월 체크 하지 않음. 무조건 3개월 연장
// 			else if (revStr == "loginPwdUpt9mm") {
// 				$('input[name=loginId]').attr('value',loginId);
// // 				mbLayer.toggle({id:revStr, msg:'회원님의 개인정보 보호를 위해 3개월마다 비밀번호 변경 안내해드리고 있습니다.\n마지막 변경일 : '+loginPwdLstUptDt+'('+pwdUptDayco+'일전)', btn:'비밀번호 변경', callback:fn_mvPage, param:'/pw-register', minHeight:200, type:'single' });
// 				var options      = {};
// 				options.msg      = '회원님의 개인정보 보호를 위해 3개월마다 비밀번호 변경 안내해드리고 있습니다.\n마지막 변경일 : '+loginPwdLstUptDt+'('+pwdUptDayco+'일전)';
// 				options.okBtnTxt = "비밀번호 변경";
// 				options.callback = fn_mvPage;
// 				options.param    = {confirm:'/pw-register'};
// 				options.minWidth  = 400;
// 				options.minHeight = 250;
// 				gfn_alertMsgBox(options);
// 				return;
// 			}
			//비밀번호 변경3개월 초과	//다음에하기, 비밀번호 재설정 M-ME-FI-04
			else if (revStr == "loginPwdUpt3mm") {
				$('#loginForm input[name=redisKey]').attr('value',redisKey);
				var options = {};
				options.msg        = '회원님의 개인정보 보호를 위해 3개월마다 비밀번호 변경안내를 시행하고 있습니다.\n안전한 서비스 이용을 위해 비밀번호 변경 후 이용바랍니다.\n지금 변경 하시겠습니까?\n\n마지막 변경일 : '+loginPwdLstUptDt+'('+pwdUptDayco+'일전)';
				options.confirmFn  = fn_mvPage;
				options.cancelFn   = fn_loginSuccessEvent;
				options.okBtnTxt     = "비밀번호 재설정";
			    options.cancelBtnTxt = "다음에 하기";
			    options.minWidth  = 400;
				options.minHeight = 300;
				options.param      = {confirm:"/pw-register" };
				gfn_confirmMsgBox(options);
				return;
// 				if(confirm('회원님의 개인정보 보호를 위해 3개월마다 비밀번호 변경안내를 시행하고 있습니다.\n안전한 서비스 이용을 위해 비밀번호 변경 후 이용바랍니다.\n지금 변경 하시겠습니까?\n\n마지막 변경일 : '+loginPwdLstUptDt+'('+pwdUptDayco+'일전)')){
// 					$('input[name=loginId]').attr('value',loginId);
// 					fn_mvPage('/pw-register');
// 					return;
// 				}
// 				else {
// 					fn_mvPage("/main");	//메인페이지로 이동
// 					return;
// 				}
			}
			//마케팅 수신일 2년 초과	//todo 다음에하기, 수신동의 설정 내정보 수정화면 개발후연결
			else if (revStr == "marketRcv") {
				var options        = {};
				options.msg        = '마케팅 수신 동의일로부터 2년이 경과되어, 수신에 대한 재동의 안내를 시행하고 있습니다. \n씨네링크의 다양한 소식 및 이벤트를 받고 싶으시면 수신동의 재설정이 필요합니다.  \n수신동의 재설정을 진행 하시겠습니까?\n\n[수신동의 정보]\n'+marketRcvStr+'';
				//options.msg        = '마케팅 수신 동의일로부터 2년이 경과되어, 수신에 대한 재동의 안내를 시행하고 있습니다. \n씨네링크의 다양한 소식 및 이벤트를 받고 싶으시면 수신동의 재설정이 필요합니다.  \n수신동의 재설정을 진행 하시겠습니까?\n\n[수신동의 정보]\n&#39;+lstSmsRcvAgreeDt+&#39;'.replaceAll('\n','<br/>');
				options.confirmFn  = fn_mvPage;
				options.cancelFn   = fn_loginSuccessEvent;
				options.okBtnTxt     = "수신동의 설정";
			    options.cancelBtnTxt = "다음에 하기";
				options.param      = {confirm:"/on/oh/ohh/Mypage/userAdditInfoPage.do?marketRcvReAgree=Y"};
				options.minWidth  = 400;
				options.minHeight = 300;
				gfn_confirmMsgBox(options);
				return;
			}
			//관리자에의한 패스워드 초기화 //비밀번호 재설정 M-ME-FI-04	관리자에 의한 패스워드 초기화는 없다.
// 			else if (revStr == "loginPwdReset") {
// // 				mbLayer.toggle({id:revStr, msg:'비밀번호 재설정이 완료되었습니다. 다시 로그인해 주시기 바랍니다.', btn:'확인', callback:fn_mvPage, param:'/pw-register', minHeight:200, type:'single' });
// 				var options = {};
// 				options.msg = '비밀번호 재설정이 완료되었습니다. 다시 로그인해 주시기 바랍니다.';
// 				options.callback  = fn_mvPage;
// 				options.param = {confirm:'/pw-register'};
// 				options.minWidth  = 400;
// 				options.minHeight = 250;
// 				gfn_alertMsgBox(options);
// 				return;
// 			}
			//휴면계정복구 안내	//TODO 다음에하기, 휴면계정복구 본인인증 수단 선택 M-ME-DA-01
			else if (revStr == "mbSchIdGuideDormAcct") {
				$('#loginForm input[name=certType]').attr('value','SCRC03');
				$('#loginForm input[name=redisKey]').attr('value',redisKey);
				var options = {};
				options.msg        = '회원님의 아이디는 ['+loginIdStar+'] 씨네링크 온라인 서비스를 1년이상 이용하지 않아 휴면계정으로 전환되었습니다. 휴면계정 복구 후 서비스 이용이 가능합니다.\n휴면계정 복구를 진행하시겠습니까?';
				options.okBtnTxt = "휴면계정복구";
				options.callback = fn_mvPage;
				options.param    = {confirm:"/member-check"};
				options.minWidth  = 400;
				options.minHeight = 300;
				gfn_alertMsgBox(options);
				return;
			}
			//탈퇴회원안내
			else if (revStr == "quitMb") {
				gfn_alertMsgBoxSize('회원탈퇴 후 1개월 이내 재가입할 수 없습니다.\n씨네링크 고객센터로 문의해 주세요',400,250);	//회원탈퇴 후 1개월 이내 재가입할 수 없습니다. 씨네링크 고객센터로 문의해 주세요
				return;
			}
			//loginPwdFail 패스워드실패안내, mbJoinReq 회원가입안내, mbInfoSearchUnable 탈퇴회원안내
			else if (revStr == "loginPwdFail" || revStr == "mbJoinReq" || revStr == "mbInfoSearchUnable") {
// 				$('.alert').text('로그인 정보가 잘못되었습니다. (로그인 '+pwdErrCnt+'/5회 실패)');	2020-02-06 씨네링크 차세대 이행/안정화 결함대장 28번
				$("#ibxLoginId").val("");
				$("#ibxLoginPwd").val("");
				gfn_alertMsgBoxSize('아이디 또는 비밀번호가 맞지 않습니다.\n로그인 정보를 다시 확인바랍니다.',400,250);	//msg.ch.ohg.ME031=아이디 또는 비밀번호가 맞지 않습니다.\\n로그인 정보를 다시 확인바랍니다.
				$("#btnLogin").attr("disabled", true);	//버튼비활성화
				sValidateLoginPwdAt ='N';
				return;
			}
		    if(typeof loginPopupCallScn === "undefined"){
		    	loginPopupCallScn = "";
		    }
// 		    console.log("this : "+loginPopupCallScn);
			//화면이동

			// 로그인시도 시 씨네링크 쿠키싱크 전달
			fn_adSetCookie(data.adMap);
			if(menuId != "" && menuId != null){  //화면으로 띄웠을떄
				fn_mvPage(mappingId);
				return;
			}
			else {

				fn_loginSuccessEvent();

			}
			return;
		},
		error: function(xhr,status,error){
			 var err = JSON.parse(xhr.responseText);
			 alert(xhr.status);
			 alert(err.message);
		},
		beforeSend: function() {
			submitIng = true;
		},
		complete: function() {
			submitIng = false;
		}
	});

	function fn_loginSuccessEvent(){
		var bokdLoginAt = $('#loginForm input[name=bokdLoginAt]').val();
		var reloadYn = $('#loginForm input[name=reloadYn]').val();
		var validDataRevisnYn = $('#loginForm input[name=validDataRevisnYn]').val();				//데이터 보정 여부
		// 좌석도 진입전 로그인 체크인 경우
		var obj = objChk;

		if(bokdLoginAt == "Y"){
			if(typeof obj != "undefined"){
				$('.before').hide();
				$('.after').show();
				$('.after .notice').show();
				$('#layer_login_select button.btn-modal-close').trigger("click");
				fn_getPlayStartOverTime(obj, $('#loginForm input[name=scnType]').val());
			}else{
				//예매로그인일경우
				//오입력값을 체크한다.
				$('.before').hide();
				$('.after').show();
				$('.after .notice').show();
				$('#layer_login_select button.btn-modal-close').trigger("click");
				fn_validDataRevisn(JSON.parse($('#loginForm input[name=bokdLoginParam]').val()));
			}
		}
		else {
			if (reloadYn == "N") {

				$('.before').hide();
				$('.after').show();
				$('.after .notice').show();
				$('#layer_login_select button.btn-modal-close').trigger("click");
				if(validDataRevisnYn == "Y"){
					fn_validDataRevisn();
				}
			} else {

				//화면 리로드
				//location.reload();
				//post submit시 브라우저 경고창 관련
				window.document.location.href = window.document.URL;


				////////////////////////////////////////////
				// TODO 빵원쿠폰일 경우에만 처리되도록 수정 //
                ////////////////////////////////////////////
                //$(".btn-modal-close").click();
                ////////////////////////////////////////////
                ////////////////////////////////////////////
			}
		}

		if (callback) {
			try {
				callback();
			} catch (e) {
				console.error(e);
			}
		}
	}

	//페이지 이동 submit
	function fn_mvPage(page){
// 		console.log("MbLoginScriptDV.fn_mvPage : "+page);

		var rtnParam = $("#loginForm [name=rtnParam]").val();

		if (rtnParam.trim() != ""){

			var arr;
			var html = '<input type="hidden" name="#1" value="#2" />';

			$.each(rtnParam.split(','), function(i, val){

				arr = val.split(':');
				arr[0] = arr[0].trim();
				arr[1] = arr[1].trim();
				arr[2] = '[name='+arr[0]+']';

				if ($("#loginForm").find(arr[2]).length > 0) {
					$("#loginForm").find(arr[2]).val(arr[1]);
				} else {
					$("#loginForm").append(html.replace('#1', arr[0]).replace('#2', arr[1]));
				}
			});
		}

		$("#loginForm").attr("method","post");
		$("#loginForm").attr("action",page);
		$("#loginForm input[name=preUrl]").val(document.location.pathname)
		$("#loginForm").submit();
	}
}
/* 비회원 */
var sValidateNonMbNmAt               = "N";
var sValidateNonMbByymmddAt          = "N";
var sValidateNonMbTelnoAt            = "N";

var sValidateMblpCharCertNo          = "N";

var sValidateNonMbPwdAt              = "N";
var sValidateNonMbPwdConfirmAt       = "N";
var sValidateNonMbPwdEqualAt         = "N";
var sValidateNonMbBokdPersonInfoProc = "N";
var sValidateMblpCertNoSuccess      = "N";

var AuthTimer;
var bokdCnfmAt                       = "N";

//이벤트
$(function(){
	if(typeof $("#ibxNonMbPwdConfirm").val() == 'undefined'){
		bokdCnfmAt = "Y";
	}
	fn_validateNonMbInputVal();
	/*비회원 로그인 버튼 비활성화*/
	$("#btnMbLogin").attr("disabled", true);

	/*비회원 정보 확인 버튼 비활성화*/
	$("#btnChkNonMbLogin").attr("disabled", true);
	$("#btnNonMbLogin").attr("disabled", true);

	/* 이름 숫자를 제외한 입력 여부판단 */
	$("#ibxNonMbNm").on("keyup", function(e){
		var partton = /[^ㄱ-힣a-zA-Z]/g;
		if(partton.test($(this).val())) {
			var value = $(this).val().replace(/[^ㄱ-힣a-zA-Z]/g,"");
			$(this).val(value);
		}
		if(fn_validateNonMbInputVal()){
			if(e.keyCode == 13) {$("#btnChkNonMbLogin").click();}
		} else {
			if(e.keyCode == 13) {$("#ibxNonMbByymmdd").focus()};
		}
	});
	$("#ibxNonMbNm").focusout(function(){
		var partton = /[^ㄱ-힣a-zA-Z]/g;
		if(partton.test($(this).val())) {
			var value = $(this).val().replace(/[^ㄱ-힣a-zA-Z]/g,"");
			$(this).val(value);
		}
		fn_validateNonMbInputVal();
	});

	/* 생년월일 숫자만 입력 여부판단 */
	$("#ibxNonMbByymmdd").on("keyup", function(e){
		$(this).val($(this).val().replace(/[^0-9]/g,""));
		if(fn_validateNonMbInputVal()){
			if(e.keyCode == 13) {$("#btnChkNonMbLogin").click();}
		} else {
			if(e.keyCode == 13) {$("#ibxNonMbTelno").focus();}
		}
	});
	$("#ibxNonMbByymmdd").focusout(function(){
		$(this).val($(this).val().replace(/[^0-9]/g,""));
		fn_validateNonMbInputVal();
	});

	/* 휴대폰번호 숫자만 입력 여부판단 */
	$("#ibxNonMbTelno").on("keyup", function(e){
		$(this).val($(this).val().replace(/[^0-9]/g,""));

		//휴대폰 번호
		if($("#ibxNonMbTelno").val() != "") {
			var frontNm = $("#ibxNonMbTelno").val().substr(0,2);
			if(frontNm != '01'){
				$('#mblpInput-error-text').text('휴대폰번호를 정확히 입력해주세요.');
				ibxNonMbTelno = 'N';
				return false;
			}
			else if($("#ibxNonMbTelno").val().length < 10){
				$('#mblpInput-error-text').text('휴대폰번호를 정확히 입력해주세요.');
				sValidateNonMbTelnoAt = 'N';
				return false;
			}
			else {
				sValidateNonMbTelnoAt = 'Y';
				$('#mblpInput-error-text').text('');
			}
		}
		else {
			sValidateNonMbTelnoAt = 'N';
		}

		//console.log("sValidateNonMbTelnoAt", sValidateNonMbTelnoAt);
		//console.log("sValidateMblpCertNoSuccess", sValidateMblpCertNoSuccess);

		//인증번호 전송 버튼 활성화
		if( sValidateNonMbTelnoAt   == 'Y' && sValidateMblpCertNoSuccess == 'N') {
			$("#nonMbCertNoSend").attr("disabled", false);
			$("#nonMbCertNoSend").removeClass("disabled");
			if(window.fn_validateJoinInfoRegInputVal) {
				//sValidateMblpCertNoSuccess = "Y";
				fn_validateJoinInfoRegInputVal();
			}
		}
		else{
			$("#nonMbCertNoSend").attr("disabled", true);
			$("#nonMbCertNoSend").addClass("disabled");
			if(window.fn_validateJoinInfoRegInputVal) {
				//sValidateMblpCertNoSuccess = "N";
				fn_validateJoinInfoRegInputVal();
			}
		}

		if(e.keyCode != 9){
			if(typeof AuthTimer != 'undefined'){
				AuthTimer.fnStop();
				$('#timer').html("3:00");
				$('#nonMbCertNoSend').html("인증요청");
				sValidateMblpCertNoSuccess = "N";
				$('#nonMbCertRow').show();
				$('#mblpCharCertNo').val("");
				$("#nonMbCertNoSend").removeClass("disabled");
				$("#nonMbCertNoSend").attr("disabled", false);
				$("#btnMblpCharCert").attr("disabled", true);
				$("#btnMblpCharCert").addClass("disabled");
				if(fn_validateNonMbInputVal()){
					if(e.keyCode == 13) {$("#btnChkNonMbLogin").click();}
				} else {
					if(e.keyCode == 13) {$("#nonMbCertNoSend").click();}
				}
			}
			else {
				if(fn_validateNonMbInputVal()){
					if(e.keyCode == 13) {$("#btnChkNonMbLogin").click();}
				} else {
					if(e.keyCode == 13) {$("#ibxNonMbPwd").focus();}
				}
			}
		}
	});
	$("#ibxNonMbTelno").focusout(function(){
		$(this).val($(this).val().replace(/[^0-9]/g,""));
		fn_validateNonMbInputVal();
	});

	/* 인증번호 숫자만 입력 여부 판단*/
	$("#mblpCharCertNo").on("keyup", function(e){
		$(this).val($(this).val().replace(/[^0-9]/g,""));

		if($("#mblpCharCertNo").val().length >= 4) {
			$("#btnMblpCharCert").removeClass("disabled");
			$("#btnMblpCharCert").attr("disabled", false);
		}
		else {
			$("#btnMblpCharCert").attr("disabled", true);
			$("#btnMblpCharCert").addClass("disabled");
		}

		if(e.keyCode == 13) {$("#btnMblpCharCert").click();}
	});
	$("#mblpCharCertNo").focusout(function(){
		$(this).val($(this).val().replace(/[^0-9]/g,""));
		if($("#mblpCharCertNo").val().length >= 4) {
			$("#btnMblpCharCert").removeClass("disabled");
			$("#btnMblpCharCert").attr("disabled", false);
		}
		else {
			$("#btnMblpCharCert").attr("disabled", true);
			$("#btnMblpCharCert").addClass("disabled");
		}
	});

	/* 비밀번호 숫자만 입력 여부판단 */
	$("#ibxNonMbPwd").on("keyup", function(e){
		$(this).val($(this).val().replace(/[^0-9]/g,""));
		if(fn_validateNonMbInputVal()){
			if(e.keyCode == 13) {$("#btnChkNonMbLogin").click();}
		} else {
			if(e.keyCode == 13) {$("#ibxNonMbPwdConfirm").focus();}
		}
	});
	$("#ibxNonMbPwd").focusout(function(){
		$(this).val($(this).val().replace(/[^0-9]/g,""));
		fn_validateNonMbInputVal();
	});

	/* 비밀번호 확인 숫자만 입력 여부판단 */
	$("#ibxNonMbPwdConfirm").on("keyup", function(e){
		$(this).val($(this).val().replace(/[^0-9]/g,""));
		if(fn_validateNonMbInputVal()) {
			if(e.keyCode == 13) {$("#btnChkNonMbLogin").click();}
		}
	});
	$("#ibxNonMbPwdConfirm").focusout(function(){
		$(this).val($(this).val().replace(/[^0-9]/g,""));
		fn_validateNonMbInputVal();
	});

	//체크박스 변경여부
	$("#chkNonMbBokdPersonInfoProcTrue").change(function() {
		if($('#chkNonMbBokdPersonInfoProcTrue').is(":checked")) {
			fn_validateNonMbInputVal();
		}
		else {
			fn_validateNonMbInputVal();
		}
	});

	$("#chkNonMbBokdPersonInfoProcFalse").change(function() {
		if($('#chkNonMbBokdPersonInfoProcFalse').is(":checked")) {
			fn_validateNonMbInputVal();
		}
		else {
			fn_validateNonMbInputVal();
		}
	});

	/*이벤트*/
	/* 인증번호 전송 버튼 클릭*/
	$("#nonMbCertNoSend").click(function(){
		if($("#nonMbCertNoSend").hasClass("disabled")){
			return;
		}

		var sRedisKey     = $('#loginForm input[name=nonMbCertRedisKey]').val();
		var sNonMbTelno   = $('#ibxNonMbTelno').val();
		var paramData = { redisKey : sRedisKey
						, nonMbTelno : sNonMbTelno
						};

		$('#nonMbCert-error-text').text('');

		$.ajaxMegaBox({
			url: "/on/oh/ohg/MbLogin/selectNonMbCertNoSend.rest",
			type: "POST",
			contentType: "application/json;charset=UTF-8",
			dataType: "json",
			data: JSON.stringify(paramData),
			success: function (data, textStatus, jqXHR) {
				$('input[name=nonMbCertRedisKey]').attr('value',data.resultMap.redisKey);

				if(data.resultMap.successAt == "N"){
					//비회원로그인-예매
					var bokdLoginAt = $('#loginForm input[name=bokdLoginAt]').val();
    				if(bokdLoginAt == "Y"){
    					//예매로그인일경우
    					//인증시간이 만료된 경우
    					if(data.resultMap.msg == "ME061"){
    						gfn_alertMsgBoxSize('인증시간이 만료되었습니다. 인증번호를 재전송 후 입력바랍니다.', 400, 250);	//인증시간이 만료되었습니다. 인증번호를 재전송 후 입력바랍니다.
    					}
    					//동일번호로 3회 이상 요청하는경우
    					else if(data.resultMap.msg == "ME062"){
    						//오입력값을 체크한다.
        					$('.before').hide();
            				$('.after').show();
            				$('#btnNonMbModalClose').trigger("click");
        					$('#layer_login_select button.btn-modal-close').trigger("click");
    						gfn_alertMsgBoxSize('동일번호로 연속적인 인증이 발생하여 창을 닫습니다.\n3분후 다시 시도해 주세요.', 400, 250);	//동일번호로 연속적인 인증이 발생하여 창을 닫습니다.\\n번호를 확인 한 후 처음부터 다시 진행바랍니다.
    					}

    				}
    				else {
    					//회원가입
    					var options = {};
						options.msg = '동일번호로 연속적인 인증이 발생하여 창을 닫습니다.\n3분후 다시 시도해 주세요.';	//동일번호로 연속적인 인증이 발생하여 창을 닫습니다.\\n처음부터 다시 이용바랍니다.
						options.callback  = fn_mvMainPage;
						options.minWidth  = 400;
						options.minHeight = 250;
						gfn_alertMsgBox(options);
    				}
					return;
				}
				else {
					//nonMbCertRedisKey
					//console.log("certNo", data.resultMap.certNo);
					$('#nonMbCertNoSend').html("재전송");
					$('#loginForm input[name=nonMbCertedMblpNo]').attr('value',sNonMbTelno);
					gfn_alertMsgBoxSize('인증번호를 전송했습니다.\n인증번호가 도착하지 않았을 경우 재전송을 눌러 주세요.', 400, 250);

					if(typeof AuthTimer != 'undefined'){
						AuthTimer.fnStop();
						$('#timer').html("3:00");
					}
					else {
						AuthTimer = new $ComTimer();
					}
					AuthTimer.comSecond = 180;
					AuthTimer.fnCallback = function(){alert("다시인증을 시도해주세요.")}
					AuthTimer.timer = setInterval(function(){AuthTimer.fnTimer()},1000);
					AuthTimer.domId = document.getElementById("timer");
					//입력하신 휴대폰 번호로 인증번호가 발송되었습니다. 확인 후 인증번호를 입력해주세요!
				}
			},
			error: function(xhr,status,error){
				var err = JSON.parse(xhr.responseText);
				alert(xhr.status);
				alert(err.message);
			}
		});
	});


	//인증번호 확인 버튼 클릭
	$("#btnMblpCharCert").click(function(){
		if($("#btnMblpCharCert").hasClass("disabled")){
			return;
		}

		var sRedisKey     = $('#loginForm input[name=nonMbCertRedisKey]').val();
		var sMblpCharCertNo = $('#mblpCharCertNo').val();
		var sNonMbTelno     = $('#ibxNonMbTelno').val();
		var paramData = { redisKey : sRedisKey
						, certNo : sMblpCharCertNo
						, nonMbTelno : sNonMbTelno
						};

		$.ajaxMegaBox({
			url: "/on/oh/ohg/MbLogin/selectNonMbCertNoCnfn.rest",
			type: "POST",
			contentType: "application/json;charset=UTF-8",
			dataType: "json",
			data: JSON.stringify(paramData),
			success: function (data, textStatus, jqXHR) {
				var successAt = data.resultMap.successAt;
				var msg = data.resultMap.msg;
				var redisKey = data.resultMap.redisKey;

				if(successAt == "Y"){
					sValidateMblpCertNoSuccess = "Y";
					fn_validateNonMbInputVal();
					$('#loginForm input[name=nonMbCertRedisKey]').attr('value',data.resultMap.redisKey);
					$('#nonMbCert-error-text').text('');
					$("#nonMbCertNoSend").attr("disabled", true);
					$("#nonMbCertNoSend").addClass("disabled");
					$("#nonMbCertRow").hide();
					gfn_alertMsgBoxSize('휴대폰 인증을 완료했습니다.\n확인 버튼을 눌러주세요.', 400, 250);	//휴대폰 인증을 완료했습니다.
					if(typeof fn_validateJoinInfoRegInputVal != "undefined"){
						fn_validateJoinInfoRegInputVal()	//회원가입에서 검증함수 호출
					}
				}
				else {
					sValidateMblpCertNoSuccess = "N";
					if(msg == "ME019"){
						$('#nonMbCert-error-text').text('인증번호가 일치하지 않습니다.\n인증번호를 다시 입력해주세요.');	//msg.ch.ohg.ME019 인증번호를 다시 확인 후 입력해 주세요.
					}
					else if(msg == "ME040"){
						$('#nonMbCert-error-text').text('인증시간이 만료되었습니다. 인증번호를 재전송 후 입력바랍니다.');	//msg.ch.ohg.ME040	유효시간이 지났습니다.  인증번호 재전송을 통해서 다시 인증해주세요.
					}
					else if(msg == "ME061"){
						$('#nonMbCert-error-text').text('인증시간이 만료되었습니다. 인증번호를 재전송 후 입력바랍니다.');	//msg.ch.ohg.ME061	유효시간이 지났습니다.  인증번호 재전송을 통해서 다시 인증해주세요.
						gfn_alertMsgBoxSize('인증시간이 만료되었습니다. 인증번호를 재전송 후 입력바랍니다.',400,250);	//입력정보를 확인해주세요.
					}

					$("#nonMbCertNoSend").removeClass("disabled");
					$("#nonMbCertNoSend").attr("disabled", false);
					$("#nonMbCertRow").show();
				}
			},
			error: function(xhr,status,error){
				var err = JSON.parse(xhr.responseText);
				alert(xhr.status);
				alert(err.message);
			}
		});
	});

	// 비회원 정보 확인 팝업 요청
	$("#btnChkNonMbLogin").click(function(){

		if(submitIng) return;

		if(typeof $("#ibxNonMbPwdConfirm").val() != 'undefined'){
			if($("#ibxNonMbPwd").val() != $("#ibxNonMbPwdConfirm").val()) {
				gfn_alertMsgBoxSize('입력정보를 확인해주세요.',400,250);	//입력정보를 확인해주세요.
				return;
			}
		}

		//생년월일 날짜형태 확인
// 		if(!fn_validateDateYn($("#ibxNonMbByymmdd").val())) {
// 			alert("생년월일 입력이 잘못 되었습니다.");
// 			$("#ibxNonMbByymmdd").focus();
// 			return;
// 		}
		$("#btnNonMbLogin").attr("disabled", false);
		fn_chkNonMbLogin();
	});

	// 비회원 로그인
	$("#btnNonMbLogin").click(function(){

		var paramData = { nonMbNm:$("#ibxNonMbNm").val()
						, nonMbByymmdd:$("#ibxNonMbByymmdd").val()
						, nonMbTelno:$("#ibxNonMbTelno").val()
						, nonMbPwd:$("#ibxNonMbPwd").val()
						, bokdCnfmAt:bokdCnfmAt
						, redisKey:$('#loginForm input[name=nonMbCertRedisKey]').val()
						};

		$.ajaxMegaBox({
			url: "/on/oh/ohg/NonMbLogin/selectNonMbLoginInfo.rest",
			type: "POST",
			contentType: "application/json;charset=UTF-8",
			dataType: "json",
			data: JSON.stringify(paramData),
			success: function (data, textStatus, jqXHR) {

				var menuId                 = data.menuId;
	            var mappingId              = data.mappingId;
	            var statCd                 = data.result.statCd;

	            if(typeof loginPopupCallScn === "undefined"){
			    	loginPopupCallScn = "";
			    }
	            //화면이동
	            if(menuId != "" && menuId != null){    //화면으로 띄웠을떄
	                fn_mvPage(mappingId);
	                return;
	            }
	            else {
	                if(loginPopupCallScn != "" && loginPopupCallScn != null){  //팝업으로 띄었을때 파라메타는 팝업 호출화면에 전역으로 정의
	                    $(".btn-layer-close").trigger("click");
	                    if(loginPopupCallScn == "SimpleBokdM"){
	                    	$('.before').hide();
	            			$('.after').show();
	                        alert("콜백함수호출");
	                    } else if(loginPopupCallScn == "StoreDtlV"){
	                    	$('.before').hide();
	            			$('.after').show();
	                    } else if(loginPopupCallScn == "MySbscDtlsL"){
	                    	$('.before').hide();
	            			$('.after').show();
	            			location.href = '/on/oh/ohh/MySbscDtls/mySbscDtlsListPage.do?currPage=1&searchText=';
	                    }
	                }
	                else {
	                	var bokdLoginAt = $('#loginForm input[name=bokdLoginAt]').val();
	    				if(bokdLoginAt == "Y"){
	    					if(typeof objChk != "undefined"){
		    					$('.before').hide();
		        				$('.after').show();
		        				$('#btnNonMbModalClose').trigger("click");
		    					$('#layer_login_select button.btn-modal-close').trigger("click");
		    					fn_getPlayStartOverTime(objChk, $('#loginForm input[name=scnType]').val());
		    					return;
	    					} else {
		    					//예매로그인일경우
		    					//오입력값을 체크한다.
		    					$('.before').hide();
		        				$('.after').show();
		        				$('#btnNonMbModalClose').trigger("click");
		    					$('#layer_login_select button.btn-modal-close').trigger("click");
		    					fn_validDataRevisn(JSON.parse($('#loginForm input[name=bokdLoginParam]').val()));
		    					return;
	    					}
	    				}

	                	if(bokdCnfmAt == "Y"){
	                		$('#nonMbBokdCnfmForm input[name=nonMbNm]').attr('value',$('#ibxNonMbNm').val());
	                		$('#nonMbBokdCnfmForm input[name=nonMbTelno]').attr('value',$('#ibxNonMbTelno').val());
	                		$('#nonMbBokdCnfmForm input[name=nonMbPwd]').attr('value',$('#ibxNonMbPwd').val());
	                		$('#nonMbBokdCnfmForm input[name=nonMbByymmdd]').attr('value',$('#ibxNonMbByymmdd').val());

                            /////////////////////////////////////////////////////////////////////
	                		// 예매정보가 없을 시 메세지 팝업처리 /////////////////////////////////
                            /////////////////////////////////////////////////////////////////////
                            if(statCd == 0) {
                                fn_mvNonMbBokdCnfm("/non-member"); //비회원 예매 확인일때
                            }else{
                                alert("입력하신 정보와 일치하는 예매내역이 없습니다.");
                            }
                            /////////////////////////////////////////////////////////////////////
                            /////////////////////////////////////////////////////////////////////

	                		//fn_mvNonMbBokdCnfm("/non-member"); //비회원 예매 확인일때
	                	}
	                	else {
	                		location.reload();
	                	}

	                }
	            }
	            return;
			},
			error: function(xhr,status,error){
				 var err = JSON.parse(xhr.responseText);
				 alert(xhr.status);
				 alert(err.message);
			},
			beforeSend: function() {
	            submitIng = true;
	        },
	        complete: function() {
	            submitIng = false;
	        }
	    });

	    //페이지 이동 submit
	    function fn_mvNonMbBokdCnfm(page){
// 	        console.log("fn_mvNonMbBokdCnfm : "+page);
	        $("#nonMbBokdCnfmForm").attr("method","post");
	        $("#nonMbBokdCnfmForm").attr("action",page);
	        $("#nonMbBokdCnfmForm").submit();
	    }

	  	//비회원 예매 확인 페이지 이동 submit
	    function fn_mvPage(page){
// 	        console.log("MbLoginScriptDV.fn_mvPage : "+page);
	        $("#loginForm").attr("method","post");
	        $("#loginForm").attr("action",page);
	        $("#loginForm").submit();
	    }
	});
});

function fn_adTracking(url){
	$.ajax({
        type: "get"
        , url: url
        , data: ""
        , dataType: "json"
        , success: function(result) {

        }
        , error: function(err) {
            console.log('fn_adEventCall error : ' + err.status);
        }
    });
}

var callback = undefined;
var objChk;
/*호출 화면에 따른 분기처리*/
function fn_viewLoginPopup(viewId,deviceType,bokdLoginAt,bokdLoginParam,reloadYn,callbackFn,obj,scnType){

  	//로그인 폼 호출시 광고영역 노출
    if( $("#Rw6jtk0hQTuOBSzFbvGGlw").html() == "" ){

    	$("#Rw6jtk0hQTuOBSzFbvGGlw").append('<a href="" target="_blank"><img id="pageBannerRnbImage" src="/static/pc/images/common/bg/bg-noimage-main.png" /></a>');

    	var header ={"typ": "JWT","alg": "HS256"}
        var data = {
            "device": {"devicetype": 2},
            "imp": [{"native": {"ext" : {"slots" : 1}}}],
            "site": {"name": "megabox"},
            "id": ""
        };
    	var secret = "Rw6jtk0hQTuOBSzFbvGGlw";

    	var stringifiedHeader = CryptoJS.enc.Utf8.parse(JSON.stringify(header));
        var encodedHeader = base64url(stringifiedHeader);
        var stringifiedData = CryptoJS.enc.Utf8.parse(JSON.stringify(data));
        var encodedData = base64url(stringifiedData);
        var signature = encodedHeader + "." + encodedData;
        signature = CryptoJS.HmacSHA256(signature, secret);
        signature = base64url(signature);
        var pram = encodedHeader+"."+encodedData+"."+signature;
        var adUrl = "https://cast.imp.joins.com/bid/"+secret+"/"+pram; //상용

    	$.ajax({
            type: "get"
            , url: adUrl
            , data: ""
            , success: function(result) {
                if(result) {
                    $("#pageBannerRnbImage").attr("src", result.image_file);
                    $("#pageBannerRnbImage").attr("alt", result.alternative_text);
                    $("#pageBannerRnbImage").attr("clickThrough", result.click_tracking);
                    $("#pageBannerRnbImage").parent().attr("href", result.click_through);



                    $("#pageBannerRnbImage").css("height", result.height);
                    $("#Rw6jtk0hQTuOBSzFbvGGlw").css("background-color", result.bgcolor);
                    fn_adTracking(result.impression_tracking);
                }
            }
            , error: function(err) {
                console.log('fn_getBannerAd error : ' + err.status);
            }
        });

    	//광고링크
   	    $("#pageBannerRnbImage").on("click", function() {
   	        var clickThrough = $(this).attr("clickThrough");
   	        if(clickThrough != undefined && clickThrough != '') {
   	        	fn_adTracking(clickThrough);
   	        }
   	    });
    }

	//
	$(".alert").html("");
	if(sCookieVal == ""){	//아이디 저장 체크 안했을경우
		$(".login-input-area #ibxLoginId").val("");			//아이디
	}
	$(".login-input-area #ibxLoginPwd").val("");		//비밀번호
	$(".no-member-login-table #ibxNonMbNm").val("");	//비회원 이름
	$(".no-member-login-table #ibxNonMbByymmdd").val("");	//비회원 생년월일
	$(".no-member-login-table #ibxNonMbTelno").val("");		//비회원 휴대폰 번호
	$(".no-member-login-table #mblpCharCertNo").val("");	//비회원 휴대폰인증번호
	$(".no-member-login-table #ibxNonMbPwd").val("");		//비회원 비밀번호
	$(".no-member-login-table #ibxNonMbPwdConfirm").val("");	//비회원 비밀번호확인
	$("input[name=chkNonMbBokdPersonInfoProc]").prop("checked",false);	//비회원 라디오버튼 해제
	if(typeof AuthTimer != 'undefined'){
	    AuthTimer.fnStop();
	    $('#timer').html("3:00");
	    $('#nonMbCertNoSend').html("인증요청");
	    sValidateMblpCertNoSuccess = "N";
	    $('#nonMbCertRow').show();
	    $('#mblpCharCertNo').val("");
	    $("#nonMbCertNoSend").removeClass("disabled");
	    $("#nonMbCertNoSend").attr("disabled", false);
	}
	fn_validateNonMbInputVal();

	$('#loginForm input[name=bokdLoginAt]').val("");				//예매 로그인 여부
	$('#loginForm input[name=bokdLoginParam]').val("");				//예매 로그인 파라메타
	$('#loginForm input[name=validDataRevisnYn]').val("");				//데이터 보정 여부
	fn_validateInputVal();

	if('pc' == deviceType){

		if('SimpleBokdM' == viewId) {
			var sBokdLoginAt = typeof bokdLoginAt == 'undefined' ? "" : bokdLoginAt;//예매 로그인 여부
			$('#layer_login_select .layer-con .tab-list').show();			//로그인 비회원로그인 선택창
			$('#layer_login_select .layer-con .tab-cont-wrap .login-member').removeClass('pt00');	//레이어 사이즈 줄임
			$("#loginPupupATag").attr("h-data",'556');	//높이값 변경
			$("#loginPupupATag").trigger("click");	//레이어띄움
			$('#loginForm input[name=bokdLoginAt]').attr('value',sBokdLoginAt);			//예매 로그인 여부 값 설정
			$('#loginForm input[name=bokdLoginParam]').attr('value',bokdLoginParam);	//예매 로그인 파라메타
			if(bokdLoginAt == "Y"){
				$('#loginForm input[name=nonMbCertRedisKey]').val("");
				$('#loginForm input[name=nonMbCertedMblpNo]').val("");
			}

		}
		else if('StoreDtlV' == viewId || 'MySbscDtlsL' == viewId) {
			$("#loginPupupATag").trigger("click");	//레이어띄움
			$("#mbPopLayer").show();		//회원 레이어
			$("#nonMbLogoLayer").hide();	//비회원 로고
			$("#nonMbPopLayer").hide();		//비회원 레이어
			$("#mbMbChoiLayer").hide();	//회원 비회원 선택

			$("#nonMbBokdCnfm").attr("style","display:none");
		}
		else if('BoutiqPrivateL' == viewId){	//부티크
			$('#layer_login_select .layer-con .tab-list li:eq(0) a').trigger("click");	//회원로그인만 클릭되도록
			$('#layer_login_select .layer-con .tab-list').hide();						//로그인 비회원로그인 선택창
			$('#layer_login_select .layer-con .tab-cont-wrap .login-member').addClass('pt00');	//레이어 사이즈 줄임
			$("#loginPupupATag").attr("h-data",'484');	//높이값 변경
			$("#loginPupupATag").trigger("click");	//레이어띄움

			$('#loginForm input[name=reloadYn]').attr('value',reloadYn); // 화면 리로드 설정
			$('#loginForm input[name=validDataRevisnYn]').val("Y");				//데이터 보정 여callbackFn부
		}
		else if('logchk' == viewId){  // 좌석 진입전 로그인 체크
			var sBokdLoginAt = typeof bokdLoginAt == 'undefined' ? "" : bokdLoginAt;//예매 로그인 여부
			$('#layer_login_select .layer-con .tab-list').show();			//로그인 비회원로그인 선택창
			$('#layer_login_select .layer-con .tab-cont-wrap .login-member').removeClass('pt00');	//레이어 사이즈 줄임
			$("#loginPupupATag").attr("h-data",'556');	//높이값 변경
			$("#loginPupupATag").trigger("click");	//레이어띄움

			$('#loginForm input[name=bokdLoginAt]').attr('value',sBokdLoginAt);			//예매 로그인 여부 값 설정
			objChk = obj;
			$('#loginForm input[name=scnType]').attr('value',scnType);

		}
		else {
			var sReloadYn = typeof reloadYn == 'undefined' ? "" : reloadYn;// 화면 리로드 여부
			$('#layer_login_select .layer-con .tab-list li:eq(0) a').trigger("click");	//회원로그인만 클릭되도록
			$('#layer_login_select .layer-con .tab-list').hide();						//로그인 비회원로그인 선택창
			$('#layer_login_select .layer-con .tab-cont-wrap .login-member').addClass('pt00');	//레이어 사이즈 줄임
			$("#loginPupupATag").attr("h-data",'484');	//높이값 변경
			$("#loginPupupATag").trigger("click");	//레이어띄움

			$('#loginForm input[name=reloadYn]').attr('value',sReloadYn); // 화면 리로드 설정
		}
		callback = callbackFn;
	}
}

//입력 문자 체크
function fn_validateNonMbInputVal(){
	//이름
	if($("#ibxNonMbNm").val() != "") {
		sValidateNonMbNmAt = 'Y';
	}
	else {
		sValidateNonMbNmAt = 'N';
	}

	//생년월일
	if($("#ibxNonMbByymmdd").val() != "") {
		if(fn_validateDateYn($("#ibxNonMbByymmdd").val(),6)){
			sValidateNonMbByymmddAt = 'Y';
			//비회원예매확인
			if(bokdCnfmAt == "Y"){
				$('#ErrTextNonMbByymmdd').text('');
			}
			//비회원로그인
			else {
				$('#mblpInput-error-text').text('');
			}
		}
		else {
			sValidateNonMbByymmddAt = 'N';
			//비회원예매확인
			if(bokdCnfmAt == "Y"){
				$('#ErrTextNonMbByymmdd').text('생년월일을 정확히 입력해주세요.');
			}
			//비회원로그인
			else {
				$('#mblpInput-error-text').text('생년월일을 정확히 입력해주세요.');
			}
			return false;
		}
	}
	else {
		sValidateNonMbByymmddAt = 'N';
		$('#mblpInput-error-text').text('');
	}

	//휴대폰 번호
	if($("#ibxNonMbTelno").val() != "") {
		var frontNm = $("#ibxNonMbTelno").val().substr(0,2);
		if(frontNm != '01'){
			$('#mblpInput-error-text').text('휴대폰번호를 정확히 입력해주세요.');
			ibxNonMbTelno = 'N';
			return false;
		}
		else if($("#ibxNonMbTelno").val().length < 10){
			$('#mblpInput-error-text').text('휴대폰번호를 정확히 입력해주세요.');
			sValidateNonMbTelnoAt = 'N';
			return false;
		}
		else {
			sValidateNonMbTelnoAt = 'Y';
			$('#mblpInput-error-text').text('');
		}
	}
	else {
		sValidateNonMbTelnoAt = 'N';
	}


	if($("#ibxNonMbPwd").val().length == 4) {
		sValidateNonMbPwdAt = 'Y';
	}
	else {
		sValidateNonMbPwdAt = 'N';
	}
	if(bokdCnfmAt == "Y"){
		sValidateNonMbPwdConfirmAt       = 'Y';
		sValidateNonMbPwdEqualAt         = 'Y';
		sValidateNonMbBokdPersonInfoProc = 'Y';
		sValidateMblpCertNoSuccess       = 'Y';
	}
	else{
		if($("#ibxNonMbPwdConfirm").val().length == 4) {
			sValidateNonMbPwdConfirmAt = 'Y';
		}
		else {
			sValidateNonMbPwdConfirmAt = 'N';
		}

		if($("#ibxNonMbPwd").val().length > 0 && $("#ibxNonMbPwdConfirm").val().length > 0 && $("#ibxNonMbPwd").val() == $("#ibxNonMbPwdConfirm").val()) {
			sValidateNonMbPwdEqualAt = 'Y';
			$('#nonMbPwdErrText').text('');
		}
		else if($("#ibxNonMbPwd").val().length > 0 && $("#ibxNonMbPwdConfirm").val().length > 0 && $("#ibxNonMbPwd").val() != $("#ibxNonMbPwdConfirm").val()){
			sValidateNonMbPwdEqualAt = 'N';
			$('#nonMbPwdErrText').text('비밀번호와 비밀번호 확인의 입력값이 일치하지 않습니다.');
			return false;
		}

		if($('#chkNonMbBokdPersonInfoProcTrue').prop("checked")){
			sValidateNonMbBokdPersonInfoProc = 'Y';
		}
		else {
			sValidateNonMbBokdPersonInfoProc = 'N';
		}

		if($('#chkNonMbBokdPersonInfoProcFalse').prop("checked")){
			sValidateNonMbBokdPersonInfoProc = 'N';
		}
	}

// 	$('#error-text1').text
// 	("sValidateNonMbNmAt:"             +sValidateNonMbNmAt              +("/")+$("#ibxNonMbNm").val().length        +("\n\n")+
// 			"sValidateNonMbByymmddAt:"         +sValidateNonMbByymmddAt         +("/")+$("#ibxNonMbByymmdd").val().length   +("\n\n")+
// 			"sValidateNonMbTelnoAt:"           +sValidateNonMbTelnoAt           +("/")+$("#ibxNonMbTelno").val().length     +("\n\n")+
// 			"sValidateNonMbPwdAt:"             +sValidateNonMbPwdAt             +("/")+$("#ibxNonMbPwd").val().length       +("\n\n")+
// 			"sValidateNonMbPwdConfirmAt:"      +sValidateNonMbPwdConfirmAt      +("/")+$("#ibxNonMbPwdConfirm").val().length+("\n\n")+
// 			"sValidateNonMbPwdEqualAt:"        +sValidateNonMbPwdEqualAt        +("/\n\n")+
// 			"sValidateNonMbBokdPersonInfoProc:"+sValidateNonMbBokdPersonInfoProc+("/\n\n")
// 		+$("input:checkbox[id='chkNonMbBokdPersonInfoProc']").is(":checked"));

	if(    bokdCnfmAt                       == "N"
		&& sValidateNonMbNmAt               == 'Y'
		&& sValidateNonMbByymmddAt          == 'Y'
		&& sValidateNonMbTelnoAt            == 'Y'
		&& sValidateNonMbPwdAt              == 'Y'
		&& sValidateNonMbPwdConfirmAt       == 'Y'
		&& sValidateNonMbBokdPersonInfoProc == 'Y'
 		&& sValidateNonMbPwdEqualAt         == 'Y'
 		&& sValidateMblpCertNoSuccess       == 'Y'){
		$("#btnChkNonMbLogin").attr("disabled", false);
		return true;
	}
	else if (bokdCnfmAt == "Y"
			&& sValidateNonMbNmAt       == 'Y'
			&& sValidateNonMbByymmddAt         == 'Y'
			&& sValidateNonMbTelnoAt == 'Y'
			&& sValidateNonMbPwdAt       == 'Y'){
		$("#btnNonMbLogin").attr("disabled", false);
		return true;
	}
	else{
		$("#btnChkNonMbLogin").attr("disabled", true);
		$("#btnNonMbLogin").attr("disabled", true);
		return false;
	}
}

/*날짜 형태 확인*/
function fn_validateDateYn(param, length) {
	try
	{
		var year  = 0;
		var month = 0;
		var day   = 0;

		param = param.replace(/-/g,'');

		// 자리수가 맞지않을때
		if( isNaN(param) || param.length < Number(length) || param.length > Number(length)) {
			return false;
		}

		if( param.length == 6){
			year  = Number(param.substring(0, 2));
			month = Number(param.substring(2, 4));
			day   = Number(param.substring(4, 6));
		}
		else if(param.length == 8){
			year  = Number(param.substring(0, 4));
			month = Number(param.substring(4, 6));
			day   = Number(param.substring(6, 8));

			var sysYear = Number(new Date().getFullYear());
			//년도입력이 현재 년도보다 클때.
			if(sysYear < year){
				return false;
			}
		}
		else {
			return false;
		}


		var dd = day / 0;


		if( month<1 || month>12 ) {
			return false;
		}

		var maxDaysInMonth = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
		var maxDay = maxDaysInMonth[month-1];

		// 윤년 체크
		if( month==2 && ( year%4==0 && year%100!=0 || year%400==0 ) ) {
			maxDay = 29;
		}

		if( day<=0 || day>maxDay ) {
			return false;
		}
		return true;

	} catch (err) {
		return false;
	}
}


function $ComTimer(){
    //prototype extend
}

$ComTimer.prototype = {
    comSecond : ""
    , fnCallback : function(){}
    , timer : ""
    , domId : ""
    , fnTimer : function(){
        var m = Math.floor(this.comSecond / 60) + ":" + String((this.comSecond % 60)).lpad(2,"0");	// 남은 시간 계산
        this.comSecond--;					// 1초씩 감소
        this.domId.innerText = m;
        if (this.comSecond < 0) {			// 시간이 종료 되었으면..
            clearInterval(this.timer);		// 타이머 해제
            $('#nonMbCert-error-text').text('인증시간이 만료되었습니다. 인증번호를 재전송 후 입력바랍니다.');	//msg.ch.ohg.ME061	인증시간이 만료되었습니다. 인증번호를 재전송 후 입력바랍니다.
            $("#btnMblpCharCert").attr("disabled", true);	//인증확인버튼 비활성
			$("#btnMblpCharCert").addClass("disabled");		//인증확인버튼 비활성
        }
    }
    ,fnStop : function(){
        clearInterval(this.timer);
    }
}

</script>
<script type="text/javascript">
var simpleLoginWithPopup;
var simpleLoginWith = function(lnkgTy){
    var url = "/on/oc/ocz/SimpleLogin/simpleLogin.do?lnkgTy=" + lnkgTy;
    if ( simpleLoginWithPopup ) {
        simpleLoginWithPopup.close();
    }
    if(lnkgTy != "FACEBOOK"){
		simpleLoginWithPopup = window.open(url, 'simpleLoginWithPopup', 'width=420, height=550');
	}
	else {
		simpleLoginWithPopup = window.open(url, 'simpleLoginWithPopup', 'width=650, height=600, scrollbars=yes');
	}
}

var fn_LoginPopUpCall = function(paramData){
    if ( lnkgInfoObj.attr("connTy") != undefined ) {
        fn_ConnWithCallBack(paramData);
    } else {
        fn_LoginWithCallBack(paramData);
    }

}
var fn_LoginPopUpCallError = function(msg){
    gfn_alertMsgBoxSize(msg, 400, 250);
}

//비회원 확인 팝업
function fn_chkNonMbLogin() {

	var $td = $(document).find('#layer_no_member_chk td');

	var telTmp = $('#ibxNonMbTelno').val();

	switch(telTmp.length){
	case 10 : telTmp = telTmp.format('XXX-XXX-XXXX'); break;
	case 11 : telTmp = telTmp.format('XXX-XXXX-XXXX');break;
	}

	$td.eq(0).html($('#ibxNonMbNm').val());
	$td.eq(1).html($('#ibxNonMbByymmdd').val());
	$td.eq(2).html(telTmp);

	// 레이어 호출
	$(document).find('#aNonMbLogin').click();
}
</script>
<script type="text/javascript">
var fn_LoginWithCallBack = function(paramData){
    $.ajaxMegaBox({
        url: "/on/oc/ocz/SimpleLogin/selectSimpleLogin.do",
        type: "POST",
        contentType: "application/json;charset=UTF-8",
        dataType: "json",
        data: JSON.stringify(paramData),
        success: function (data, textStatus, jqXHR) {
            if ( data.userMap == null ) {
            	//var simpleLoginTyCd = data.userMap.simpleLoginTyCd;
                gfn_alertMsgBoxSize('['+paramData.simpleLoginTyCd+'] 계정으로 연동된 씨네링크 계정이 없습니다.\n연동을 원하시면 나의씨네링크 > 개인정보수정에서\n간편로그인 계정연동을 진행해 주세요.', 400, 250);
            } else {
                var loginId = data.userMap.loginId;
                var mbNo    = data.userMap.mbNo;
                fn_selectMbLogin(loginId, "simpleLogin", "Y", paramData.redisKey);
            }
        },
        error: function(xhr,status,error){
            var err = JSON.parse(xhr.responseText);
            alert(xhr.status);
            alert(err.message);
        }
    });
}
var lnkgInfoObj;
$(function(){
    $("div.sns-login > a").off("click").on("click",function(){
        lnkgInfoObj = $(this);
        simpleLoginWith($(this).attr("lnkgTy"));
    });
});
</script>
<form id="loginForm">
	<input type='hidden' name='redisKey' value='' />
	<input type='hidden' name='menuId' value='' />
	<input type='hidden' name='mappingId' value='' />
	<input type='hidden' name='rtnParam' value='' />
	<input type='hidden' name='certType' value='' />
	<input type='hidden' name='preUrl' value='' />

	<!-- 좌석도 로그인 프로세스 여부PARAM-->
	<input type='hidden' name='bokdLoginAt' value='' />
	<input type='hidden' name='bokdLoginParam' value='' />

	<!-- 스케쥴 > 좌석도 진입시 로그인 프로세스 여부PARAM-->
	<input type='hidden' name='obj' value='' />
	<input type='hidden' name='scnType' value='' />

	<input type='hidden' name='nonMbCertRedisKey' value='' />
	<input type='hidden' name='nonMbCertedMblpNo' value='' />

	<input type='hidden' name='reloadYn' value='' />
	<input type='hidden' name='validDataRevisnYn' value='N' />

</form>







<!--  ko_KR -->
        
<!-- 로그인 레이어팝업 시작 -->
<!-- 화면ID  M-ME-LO-01 -->
<!-- 화면ID  M-ME-CC-01 -->
<div style="display:none;"><a id="loginPupupATag" href="#layer_login_select" class="button active btn-modal-open" w-data="850" h-data="484"></a></div>

	<section id="layer_login_select" class="modal-layer" style="z-index: 501;"><a href="#" class="focus" title="레이어로 포커스 이동 됨">레이어로 포커스 이동 됨<!--레이어로 포커스 이동 됨--></a>
		<div class="wrap" style="width: 850px; height: 556px; margin-left: -425px; margin-top: -278px;">
			<header class="layer-header">
				<h3 class="tit">로그인</h3>
			</header>

			<div class="layer-con" style="height: 511px;">

				<div class="tab-list tab-layer">
					<ul>
						<li class="on"><a href="#login_tab_01" title="회원 로그인 선택">회원 로그인<!--회원 로그인--></a></li>
						<li><a href="#login_tab_02" title="비회원 로그인 선택">비회원 로그인<!--비회원 로그인--></a></li>
					</ul>
				</div>

				<!-- tab-cont-wrap -->
				<div class="tab-cont-wrap">
					<!-- tab 회원 로그인 -->
					<div id="login_tab_01" class="tab-cont on"><a href="" class="ir" title="로그인"></a>

						<div class="login-member col-2">
							<!-- col-wrap -->
							<div class="col-wrap">
								<div class="col left">
									<div class="login-input-area">
										<input autocomplete="off" id="ibxLoginId" maxlength="20" type="text" placeholder="아이디" title="아이디를 입력하세요" class="input-text strTrim"><!--아이디--><!--아이디를 입력하세요-->
										<input autocomplete="off" id="ibxLoginPwd" maxlength="20" type="password" placeholder="비밀번호" title="비밀번호를 입력하세요" class="input-text mt15"><!--비밀번호--><!--비밀번호를 입력하세요-->
										<div class="alert"></div>

										<!-- chk-util -->
										<div class="chk-util">
											<div class="left">
												<input id="chkIdSave" type="checkbox"> <label for="chkIdSave">아이디 저장<!--아이디 저장--></label>
											</div>

											<div class="right">
												<!-- <div class="hp-ad">
										      <a href="https://www.sepay.org/spm/join?regSiteCode=XF&ctgCode=1&subCode=1" title="휴대폰 간편 로그인 선택" target="_blank" title="새창 열림"><span>휴대폰 간편로그인휴대폰 간편로그인</span> <em>광고광고</em></a>
												</div> -->
											</div>
										</div>
										<!--// chk-util -->

										<button id="btnLogin" type="button" class="button purple large btn-login">로그인<!--로그인--></button>

										<div class="link">
											<a href="/user-find" title="ID/PW 찾기 선택">ID/PW 찾기<!--ID/PW 찾기--></a>
											<a href="/join" title="회원가입 선택">회원가입<!--회원가입--></a>
											<a href="/on/oh/ohg/MbLogin/viewNonMbLogin.rest" title="비회원 예매확인 선택">비회원 예매확인<!--비회원 예매확인--></a>
										</div>

										<div class="sns-login">
											<!-- <a href="javaScript:void(0)" lnkgTy="FACEBOOK" title="페이스북으로 로그인 선택"><img src="../../../static/pc/images/member/ico-facebook.png"  alt="페이스북">페이스북으로 로그인</a>-->
											<a href="javaScript:void(0)" lnkgTy="NAVER"    title="네이버로 로그인 선택"><img src="../../../static/pc/images/member/ico-naver.png"     alt="네이버"><!--네이버-->   네이버로 로그인<!--네이버로 로그인--></a>
											<a href="javaScript:void(0)" lnkgTy="KAKAO"    title="카카오톡으로 로그인 선택" ><img src="../../../static/pc/images/member/ico-kakao.png"    alt="카카오톡"><!--카카오톡--> 카카오톡으로 로그인<!--카카오톡으로 로그인--></a>
											<a href="javaScript:void(0)" lnkgTy="PAYCO"    title="페이코로 로그인 선택"><img src="../../../static/pc/images/member/ico-payco.png"     alt="페이코"><!--페이코-->   페이코로 로그인<!--페이코로 로그인--></a>
										</div>
									</div>
								</div>

								<div class="col right">
									<div class="login-ad" id="Rw6jtk0hQTuOBSzFbvGGlw"></div>
								</div>
							</div>
							<!--// col-wrap -->
						</div>
					</div>
					<!--// tab 회원 로그인 -->

					<!-- tab 비회원 로그인 -->
					<div id="login_tab_02" class="tab-cont"><a href="" class="ir" title="비회원 로그인"></a>

						<div class="login-member col-2">
							<!-- col-wrap -->
							<div class="col-wrap">
								<div class="col left">

									<div class="no-member-login-table">
										<table summary="이름, 생년월일, 휴대폰번호, 인증번호, 비밀번호, 비밀번호 확인 항목을 가진 비회원 로그인 입력 표">
											<caption>이름, 생년월일, 휴대폰번호, 인증번호, 비밀번호, 비밀번호 확인 항목을 가진 비회원 로그인 입력 표<!--이름, 생년월일, 휴대폰번호, 인증번호, 비밀번호, 비밀번호 확인 항목을 가진 비회원 로그인 입력 표--></caption>
											<colgroup>
												<col style="width:110px;">
												<col>
											</colgroup>
											<tbody>
												<tr>
													<th scope="row">
														<label for="ibxNonMbNm">이름<!--이름--></label>
													</th>
													<td>
														<input maxlength="20" id="ibxNonMbNm" type="text" placeholder="이름" class="input-text"><!--이름-->
													</td>
												</tr>
												<tr>
													<th scope="row">
														<label for="ibxNonMbByymmdd">생년월일<!--생년월일--></label>
													</th>
													<td>
														<input maxlength="6" id="ibxNonMbByymmdd" type="text" placeholder="생년월일 앞6자리" class="input-text"><!--주민번호 앞 6자리-->
													</td>
												</tr>
												<tr>
													<th scope="row">
														<label for="ibxNonMbTelno">휴대폰번호<!--휴대폰번호--></label>
													</th>
													<td>
														<div class="hp-input">
															<input maxlength="11" id="ibxNonMbTelno" type="text" placeholder="- 없이 입력" class="input-text"><!--- 없이 입력-->
															<button id="nonMbCertNoSend" type="button" class="button gray" disabled="disabled">인증요청<!--인증요청--></button>
														</div>
														<div id="mblpInput-error-text" class="alert" ></div>
													</td>
												</tr>
												<tr id="nonMbCertRow">
													<th scope="row">
														<label for="mblpCharCertNo">인증번호<!--인증번호--></label>
													</th>
													<td>
														<div class="chk-num">
															<div class="line">
																<input maxlength="4" id="mblpCharCertNo" type="text" class="input-text">

																<div class="time-limit" id="timer">
																	3:00
																</div>
															</div>

															<button id="btnMblpCharCert" type="button" class="button purple" disabled="disabled">확인<!--확인--></button>
														</div>
														<div id="nonMbCert-error-text" class="alert"></div>
													</td>
												</tr>
												<tr>
													<th scope="row">
														<label for="ibxNonMbPwd">비밀번호</label><!--비밀번호-->
													</th>
													<td>
														<input  maxlength="4" id="ibxNonMbPwd" type="password" placeholder="비밀번호(숫자 4자리)" class="input-text"><!--비밀번호(숫자 4자리)-->
													</td>
												</tr>
												<tr>
													<th scope="row">
														<label for="ibxNonMbPwdConfirm">비밀번호<!--비밀번호-->확인<!--확인--></label>
													</th>
													<td>
														<input maxlength="4" id="ibxNonMbPwdConfirm" type="password" placeholder="비밀번호(숫자 4자리) 확인" class="input-text"><!--비밀번호(숫자 4자리) 확인-->
														<div id="nonMbPwdErrText" class="alert"></div>
													</td>
												</tr>
											</tbody>
										</table>
									</div>
								</div>

								<div class="col right">

									<div class="no-member-privacy-rule">
										<p class="tit">비회원예매 개인정보 처리방침<!--비회원예매 개인정보 처리방침--></p>

										<div class="cont">
											<dl>
												<dt>수집목적</dt><dd>비회원예매 서비스 제공 / 이용자식별 / 구매 및  결제</dd><dt>수집항목</dt><dd>이름, 생년월일, 휴대폰번호, 비밀번호</dd><dt>보유기간</dt><dd class='ismsimp'>관람 또는 취소 후 7일 이내</dd><!--<dt>수집목적</dt><dd>비회원예매 서비스 제공 / 이용자식별 / 구매 및  결제</dd><dt>수집항목</dt><dd>이름, 생년월일, 휴대폰번호, 비밀번호</dd><dt>보유기간</dt><dd>관람 또는 취소 후 7일 이내</dd>-->
											</dl>

											<div class="btn-agree">
												<input type="radio"  id="chkNonMbBokdPersonInfoProcTrue" name="chkNonMbBokdPersonInfoProc">
												<label for="chkNonMbBokdPersonInfoProcTrue">동의<!--동의--></label>

												<input type="radio" id="chkNonMbBokdPersonInfoProcFalse" name="chkNonMbBokdPersonInfoProc" class="ml20">
												<label for="chkNonMbBokdPersonInfoProcFalse">미동의<!--미동의--></label>
											</div>

											<ul class="dot-list gblue mt20">
												<li class="font-gblue">정보수집에 동의를 거부할 수 있으며, 동의하지 않을 경우 비회원 예매서비스를 이용하실 수 없습니다.<!--정보수집에 동의를 거부할 수 있으며, 동의하지 않을 경우 비회원 예매서비스를 이용하실 수 없습니다.--></li>
											</ul>
										</div>
									</div>
								</div>
							</div>
							<!--// col-wrap -->

							<div class="btn-group">
								<button id="btnChkNonMbLogin" type="button" class="button purple">확인</button>
								<a id="aNonMbLogin" href="#layer_no_member_chk" class="button purple btn-modal-open" w-data='600' h-data='320' style="display: none;"></a>
							</div>
						</div>
					</div>
					<!--// tab 비회원 로그인 -->
				</div>
				<!--// tab-cont-wrap -->
			</div>

			<button type="button" class="btn-modal-close">레이어 닫기<!--레이어 닫기--></button>
		</div>
	</section>

	<section id="layer_no_member_chk" class="modal-layer">
		<div class="wrap">
			<header class="layer-header">
				<h3 class="tit">알림</h3>
			</header>

			<div class="layer-con">
				<p>티켓 발권을 위한 입력정보를 확인해 주세요.</p>

				<div class="table-wrap v1">
					<table class="data-table" summary="이름, 생년월일, 휴대폰번호 항목을 가진 비회원 티켓 발권을 위한 입력정보 표">
						<caption>이름, 생년월일, 휴대폰번호 항목을 가진 비회원 티켓 발권을 위한 입력정보 표</caption>
						<colgroup>
							<col style="width:80px;" />
							<col />
						</colgroup>
						<tbody>
							<tr>
								<th scope="row" class="a-l">이름</th>
								<td></td>
							</tr>
							<tr>
								<th scope="row" class="a-l">생년월일</th>
								<td></td>
							</tr>
							<tr>
								<th scope="row" class="a-l">휴대폰번호</th>
								<td></td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>

			<div class="btn-group-fixed">
				<button type="button" class="button close-layer small">취소</button>
				<button id="btnNonMbLogin" type="button" class="button purple small">확인</button>
			</div>

			<button id="btnNonMbModalClose" type="button" class="btn-modal-close">레이어 닫기</button>
		</div>
	</section>
<!--  ko_KR -->
        

<script type="text/javascript">
    $(function(){
        
            
            
            	$('#header .right-link .before').hide();
            	$('#header .right-link .after').show();
            
        

        // 웹에서만 실행 -> facebook을 로드하지 않는 템플릿에서 반복적인 오류 발생으로 hreader로 이전
        if(!MegaboxUtil.Common.isMobile() && !MegaboxUtil.Common.isApp())
            MegaboxUtil.Share.init();
    });

    //로그인 버튼
    $(document).on('click', '#moveLogin', function() {

        fn_viewLoginPopup('default','pc');

    });

    var sysCd = 'ON';


</script>



<!-- header -->
<header id="header" >
    <h1 class="ci"><a href="/" title="CINELINK 메인으로 가기">CINELINK : Life Theater</a></h1>

	<!-- 브라우저 다운로드 -->
    

    <script type="text/javascript">
    $(function(){
	  	//닫기 버튼 클릭
		$('.ie-update').on('click', '.close-chk .closeDl', function() {
			 if ($(":checkbox[id='one_month_no_update']:checked").length > 0) {
				fn_setCookie("BROWDER_DL", "Y", 30);
			}

			$('.ie-update').hide();
		});

		//다시보지 않기
		 if (fn_getCookie("BROWDER_DL") == null || fn_getCookie("BROWDER_DL") == 'N') {
			if ( $(".lt-ie9").length > 0 && $('.ie-update').length > 0 ) {
				$('.ie-update').show();
			}
		}
    });
    </script>
	<!-- ie-update : ie 9 이하 일때만 출력 -->
	<div class="ie-update">
		<div class="dimd"></div>
		<div class="wrap">
			<p class="tit">
				<img src="../../../static/pc/images/ie/txt-update.png" alt="CINELINK 홈페이지는 internet explrer10이상에서 최적화된 서비스 이용이 가능합니다. ie9 이하에서는 예매가 정상적으로 진행되지 않을 수 있으니, 브라우저를 업그레이드하시거나 다른 예매수단을 이용해 주세요!" />
			</p>

			<div class="box">
				<div class="col">
					<p class="txt">브라우저를 최신 버전으로<br>업그레이드 해보세요!</p>

					<div class="link">
						<a href="https://www.microsoft.com/ko-kr/download/internet-explorer.aspx" title="internet explorer 새 버전 다운로드" target="_blank">
							<img src="../../../static/pc/images/ie/btn-ie.png" alt="internet explorer 새 버전 다운로드" />
						</a>
					</div>

					<div class="link">
						<a href="http://www.google.com/chrome?hl=ko" title="chrome 다운로드" target="_blank">
							<img src="../../../static/pc/images/ie/btn-chrome.png" alt="chrome 다운로드">
						</a>
					</div>
				</div>

				<div class="col">
					<p class="txt">CINELINK 모바일 app을<br>이용해 보세요!</p>

					<div class="link">
						<a href="https://itunes.apple.com/us/app/megabox/id894443858?l=ko&amp;ls=1&amp;mt=8" title="available on the app store" target="_blank">
							<img  src="../../../static/pc/images/ie/btn-appstore.png" alt="available on the app store">
						</a>
					</div>

					<div class="link">
						<a href="https://play.google.com/store/apps/details?id=com.megabox.mop&amp;hl=ko" title="available on the google play" target="_blank">
							<img src="../../../static/pc/images/ie/btn-google.png" alt="available on the google play">
						</a>
					</div>
				</div>
			</div>

			<div class="close-chk">
				<input type="checkbox" id="one_month_no_update" />
				<label for="one_month_no_update" class="ml05">한 달 동안 이 창을 열지 않음</label>

				<button type="button" class="closeDl button purple x-small ml20">닫기</button>
			</div>
		</div>
	</div>
	<!--// ie-update : ie 9 이하 일때만 출력 -->
    <!--// 브라우저 다운로드 -->

    <!-- topGnb -->
    



	<!-- 2019-04-15 마크업 수정 : 고객요청  -->
    <div class="util-area">
        <div class="left-link">
            <a href="/benefit/viplounge" 	title="VIP LOUNGE">VIP LOUNGE</a>
            <a href="/benefit/membership"	title="멤버십">멤버십</a>
            <a href="/support"				title="고객센터">고객센터</a>
        </div>

        <div class="right-link">
            <!-- 로그인전 -->
            <div class="before" style="display:none">
                <a href="javaScript:fn_viewLoginPopup('default','pc')" title="로그인">로그인</a>
                <a href="/join" title="회원가입">회원가입</a>
            </div>

            <!-- 로그인후 --> <!--2023-10-18 로그아웃 연동 완료  -->
					<div class="after" style="" th:if="${session.loginid != null or session.kakaoemail != null}">
   					 <a th:if="${session.loginid != null}" href="/logout">로그아웃</a>
   					 <a th:if="${session.kakaoemail != null}" href="https://kauth.kakao.com/oauth/logout?client_id=b4e15198a92c66541e626d75b50f81ec&amp;logout_redirect_uri=http://localhost:8081/logout">로그아웃</a>
                <a href="" class="notice" title="알림">알림</a>

                <!-- layer-header-notice -->
				<div class="layer-header-notice">
					<div class="notice-wrap">
						<p class="tit-notice">알림함</p>

						<div class="count">
							<p class="left">전체 <em class="totalCnt">0</em> 건</p>

							<p class="right">* 최근 30일 내역만 노출됩니다.</p>
						</div>

						<!-- scroll -->
						<div class="scroll m-scroll">
							<ul class="list">
								<li class="no-list">
									알림 내역이 없습니다.
								</li>
							</ul>
						</div>
						<div class="notice-list-more">
							<button type="button" class="button btn-more-notice-list">더보기 <i class="iconset ico-btn-more-arr"></i></button>
						</div>
						<!--// scroll -->
						<button type="button" class="btn-close-header-notice">알림 닫기</button>
					</div>
					<!--// notice-wrap -->
				<!--// layer-header-notice -->
				</div>

            </div>
		
            <a href="/booking">빠른예매</a>
        </div>
    </div>

    <div class="link-area">
        <a href="#layer_sitemap" 		class="header-open-layer btn-layer-sitemap"	title="사이트맵">사이트맵</a>
        <a href="#layer_header_search" 	class="header-open-layer btn-layer-search"	title="검색">검색</a>
        <a href="/booking/timetable" 	class="link-ticket" 						title="상영시간표">상영시간표</a>
        <a href="#layer_mymega2" 		class="header-open-layer btn-layer-mymega" 	title="나의 씨네링크">나의 씨네링크</a>
    </div>

    <!-- gnb -->
    
    <nav id="gnb">
        <ul class="gnb-depth1">
            <li><a href="/movieDetail/movie" class="gnb-txt-movie" title="영화">영화</a>
                <div class="gnb-depth2">
                    <ul>
                        <li><a href="/movie"					title="전체영화">전체영화</a></li>


                        <li><a href="/curation/specialcontent"	title="큐레이션">큐레이션</a></li>
                        
                        <li id="festivalArea" style="display: none;"><a href="/festival" title="영화제">영화제</a></li>
                        <li><a href="/moviepost/all"			title="무비포스트">무비포스트</a></li>
                    </ul>
                </div>
            </li>
            <li><a href="/booking/cineReserve" id="reserve" class="gnb-txt-reserve" title="예매" >예매</a>
                <div class="gnb-depth2">
                    <ul>
                        <li><a href="/booking"					title="빠른예매">빠른예매</a></li>
                        <li><a href="/booking/timetable"		title="상영시간표">상영시간표</a></li>
                        <li><a href="/booking/privatebooking"	title="더 부티크 프라이빗 예매">더 부티크 프라이빗 예매</a></li>
                    </ul>
                </div>
            </li>
            <li><a href="/theater/list" class="gnb-txt-theater" title="극장">극장</a>
                <div class="gnb-depth2">
                    <ul>
                        <li><a href="/theater/list" title="전체극장">전체극장</a></li>
                        <li><a href="/specialtheater/list" title="특별관">특별관</a></li>
                    </ul>
                </div>
            </li>
            <li><a href="/event" class="gnb-txt-event" title="이벤트">이벤트</a>
                <div class="gnb-depth2">
                    <ul>
                        <li><a href="/event"                 title="진행중 이벤트">진행중 이벤트</a></li>
                        <li><a href="/event/end"             title="지난 이벤트">지난 이벤트</a></li>
                        <li><a href="/event/winner/list"     title="당첨자발표">당첨자발표</a></li>
                    </ul>
                </div>
            </li>
            <li><a href="/store" class="gnb-txt-store" title="스토어">스토어</a></li>
            <li><a href="/benefit/membership" class="gnb-txt-benefit" title="혜택">혜택</a>
                <div class="gnb-depth2">
                    <ul>
                        <li><a href="/benefit/membership" title="씨네링크 멤버십">씨네링크 멤버십</a></li>
                        <li><a href="/benefit/discount/guide" title="제휴/할인">제휴/할인</a></li>
                    </ul>
                </div>
            </li>
        </ul>
    </nav>
    <!--// gnb -->
    <script type="text/javascript">
        $(document).ready(function() {
            var filmCheck = MegaboxUtil.Common.moveMovieFilmCheckGnb(); // 영화제 존재여부 체크
            if(filmCheck == true){
                $("#festivalArea").show();
            }else{
                $("#festivalArea").hide();
            }
        });
    </script>
    <!--// topGnb -->

    <!-- 레이어 : 사이트맵 -->
    



	<div id="layer_sitemap" class="header-layer layer-sitemap">
        <!-- wrap -->
        <div class="wrap">
            <a href="" class="link-acc" title="사이트맵 레이어 입니다.">사이트맵 레이어 입니다.</a>

            <p class="tit">SITEMAP</p>

            <div class="list position-1">
                <p class="tit-depth">영화</p>

                <ul class="list-depth">
                    <li><a href="/movie" title="전체영화">전체영화</a></li>
                    <li><a href="/curation/specialcontent" title="큐레이션">큐레이션</a></li>
                    <li><a href="javascript:void(0)" onclick="javascript:MegaboxUtil.Common.moveMovieFilmCheck();" title="영화제">영화제</a></li>
                    <li><a href="/moviepost/all" title="무비포스트">무비포스트</a></li>
                </ul>
            </div>

            <div class="list position-2">
                <p class="tit-depth">예매</p>

                <ul class="list-depth">
                    <li><a href="/booking" title="빠른예매">빠른예매</a></li>
                    <li><a href="/booking/timetable" title="상영시간표">상영시간표</a></li>
                    <li><a href="/booking/privatebooking" title="더 부티크 프라빗 예매">더 부티크 프라이빗 예매</a></li>
                </ul>
            </div>

            <div class="list position-3">
                <p class="tit-depth">극장</p>

                <ul class="list-depth">
                    <li><a href="/theater/list" title="전체극장">전체극장</a></li>
                    <li><a href="/specialtheater/list" title="특별관">특별관</a></li>
                </ul>
            </div>

            <div class="list position-4">
                <p class="tit-depth">이벤트</p>

                <ul class="list-depth">
                    <li><a href="/event"                 title="진행중 이벤트">진행중 이벤트</a></li>
                    <li><a href="/event/end"             title="지난 이벤트">지난 이벤트</a></li>
                    <li><a href="/event/winner/list"     title="당첨자발표">당첨자발표</a></li>
                </ul>
            </div>

            <div class="list position-5">
                <p class="tit-depth">스토어</p>

                <ul class="list-depth">
                    <li><a href="/store"                title="새로운 상품">새로운 상품</a></li>
                    <li><a href="/store/megaticket"     title="메가티켓">메가티켓</a></li>
                    <li><a href="/store/popcorn"        title="팝콘/음료/굿즈">팝콘/음료/굿즈</a></li>
                    <li><a href="/store/pointmall"		title="포인트몰">포인트몰</a></li>
                </ul>
            </div>
            <div class="list position-6">
                <p class="tit-depth">나의 씨네링크</p>
                <ul class="list-depth mymage">
                	
            			
            			
            				<li><a href="/mypage" title="나의 씨네링크 홈">나의 씨네링크 홈</a></li>
		                    <li><a href="/mypage/bookinglist" title="예매/구매내역">예매/구매내역</a></li>
		                    <li><a href="/mypage/movie-coupon" title="영화관람권">영화관람권</a></li>
		                    <li><a href="/mypage/store-coupon" title="스토어교환권">스토어교환권</a></li>
		                    <li><a href="/mypage/discount-coupon" title="할인/제휴쿠폰">할인/제휴쿠폰</a></li>
		                    <!-- <li><a href="/on/oh/ohh/Mvtckt/GiftCardL.do">기프트카드</a></li> -->
		                    <li><a href="/mypage/point-list" title="멤버십포인트">멤버십포인트</a></li>
		                    <li><a href="/mypage/moviestory" title="나의 무비스토리">나의 무비스토리</a></li>
		                    <li><a href="/mypage/myevent" title="나의 이벤트 응모내역">나의 이벤트 응모내역</a></li>
		                    <li><a href="/mypage/myinquiry" title="나의 문의내역">나의 문의내역</a></li>
		                    <li><a href="/mypage/mydiscount" title="자주쓰는 할인카드">자주쓰는 할인카드</a></li>
		                    <li><a href="/on/oh/ohh/Mypage/mainPage.do?returnURL=info" title="회원정보">회원정보</a></li>
            			
            		
                </ul>
            </div>

            <div class="list position-7">
                <p class="tit-depth">혜택</p>

                <ul class="list-depth">
                    <li><a href="/benefit/membership" title="멤버십 안내">멤버십 안내</a></li>
                    <li><a href="/benefit/viplounge" title="VIP LOUNGE">VIP LOUNGE</a></li>
                    <li><a href="/benefit/discount/guide" title="제휴/할인">제휴/할인</a></li>
                </ul>
            </div>

            <div class="list position-8">
                <p class="tit-depth">고객센터</p>

                <ul class="list-depth">
                    <li><a href="/support" 			title="고객센터 홈">고객센터 홈</a></li>
                    <li><a href="/support/faq"		title="자주묻는질문">자주묻는질문</a></li>
                    <li><a href="/support/notice"	title="공지사항">공지사항</a></li>
                    <li><a href="/support/inquiry"	title="1:1문의">1:1문의</a></li>
                    <li><a href="/support/rent"		title="단체/대관문의">단체/대관문의</a></li>
                    <li><a href="/support/lost"		title="분실물문의">분실물문의</a></li>
                </ul>
            </div>

            <div class="list position-9">
                <p class="tit-depth">회사소개</p>

                <ul class="list-depth">
                    <li><a href="/megaboxinfo" 			target="_blank" title="씨네링크소개">씨네링크소개</a></li>
                    <li><a href="/socialcontribution" 	target="_blank" title="사회공헌">사회공헌</a></li>
                    <li><a href="/advertize" 			target="_blank" title="홍보자료">홍보자료</a></li>
                    <li><a href="/partner" 				target="_blank" title="제휴/부대사업문의">제휴/부대사업문의</a></li>
                    <li><a href="/onlinereport" 		target="_blank" title="온라인제보센터">온라인제보센터</a></li>
                    <li><a href="/ir" 					target="_blank" title="자료">IR자료</a></li>
                    <li><a href="/recruit" 				target="_blank" title="인재채용림">인재채용</a></li>
                    <li><a href="https://jebo.joonganggroup.com/main.do" target="_blank" title="윤리경영">윤리경영</a></li>
                </ul>
            </div>

            <div class="list position-10">
                <p class="tit-depth">이용정책</p>

                <ul class="list-depth">
                    <li><a href="/support/terms"		title="이용약관">이용약관</a></li>
                    <li><a href="/support/lcinfo"		title="위치기반서비스 이용약관">위치기반서비스 이용약관</a></li>
                    <li><a href="/support/privacy"		title="개인정보처리방침">개인정보처리방침</a></li>
                    <li><a href="/support/screenrule"	title="스크린수배정에관한기준">스크린수배정에관한기준</a></li>
                </ul>
            </div>

            <div class="ir">
                <a href="" class="layer-close" title="레이어닫기">레이어닫기</a>
            </div>
        </div>
        <!--// wrap -->
    </div>
    <!--// 레이어 : 사이트맵 -->

    <!-- 레이어 : 검색 -->
    <div id="layer_header_search" class="header-layer layer-header-search"></div>
    <!--// 레이어 : 검색 -->

    <!-- 레이어 : 마이페이지 -->
    




<div id="layer_mymega2" class="header-layer layer-mymege2">
    <a href="" class="ir" title="나의 씨네링크 레이어 입니다.">나의 씨네링크 레이어 입니다.</a>

    <!-- wrap-->
    <div class="wrap" style="">

        <div class="login-after" style="display:none;">
            <div class="couponpass" style="display:none;">
                <span>쿠폰패스 이용고객이시군요!!쿠폰패스로 발급된 쿠폰을 확인해보세요~ </span>
            </div>
            <div class="inner">
                <div class="box">
                    <div class="mbimg"><img src="" alt="" ></div>
                    <div class="name"><span></span>님</div>

                    <a href="/mypage" class="linkBtn" title="나의  씨네링크">나의  씨네링크</a>
                </div>

                <div class="box">
                    <div class="tit">
                        <span>스페셜 멤버십</span>
                    </div>
                    <ul class="membership">
                        <li class="txt">가입된 스페셜 멤버십이 없어요!</li>
                    </ul>
                </div>


                <div class="box point">
                    <div class="tit">
                        <a class="linkA" href="/mypage/point-list" title="멤버십 포인트"><span>포인트</span></a>
                    </div>
                    <div class="count">0</div>
                </div>

                <div class="box coupon">
                    <div class="tit">
                        <a class="linkA" href="/mypage/discount-coupon" title="쿠폰"><span>쿠폰</span></a>
                        <a class="linkA" href="/mypage/point-list" title="멤버십 포인트"></a>
                    </div>

                    <div title="쿠폰 수" class="count">1</div>
                </div>

                <div class="box movieTk">
                    <div class="tit">
                        <a class="linkA" href="/mypage/movie-coupon" title="관람권"><span>관람권</span></a>
                       <!-- 주석 <a class="linkA" href="/mypage/point-list" class="button" title="멤버십 포인트"></a> -->
                    </div>

                    <div title="관람권 수" class="count">0</div>
                </div>

                <div class="box reserve">
                    <div class="tit">
                        <a class="linkA" href="/mypage/bookinglist" title="예매내역"><span>예매</span></a>
                    </div>

                    <div title="예매 수" class="count"></div>
                </div>

                <div class="box buy">
                    <div class="tit">
                        <a class="linkA" href="/mypage/bookinglist?tab=02" title="구매내역"><span>구매</span></a>
                    </div>

                    <div class="count"><em>0</em><span>건</span></div>
                </div>
            </div>
        </div>

        <!-- 로그인 전 -->
        <div class="login-before" style="display:none;">
            <div class="txt">영화를 사랑하는 당신을 위한 꼭 맞는 혜택까지 확인해 보세요!</div>

            <div class="linkBox">
                <a href="#layer_login_common" id="moveLogin" title="로그인" class="btn-modal-open" w-data="850" h-data="484">로그인</a>
                <a href="/join" class="link" title="혹시 아직 회원이 아니신가요?">혹시 아직 회원이 아니신가요?</a>
            </div>

        </div>
    </div>
    <!--// wradiv -->

    <div class="ir">
        <a href="" class="layer-close" title="레이어닫기">레이어닫기</a>
    </div>
</div>
    <!--// 레이어 : 마이페이지 -->

</header>
<!--// header -->


        <div class="container has-lnb">
            <div class="page-util">
                 <div class="inner-wrap" id="myLoaction"></div>
            </div>

            <div class="inner-wrap">
                


<script type="text/javascript">

</script>


	<div class="lnb-area">
		<nav id="lnb">
			<p class="tit"><a href="/mypage" title="나의 씨네링크">나의 씨네링크</a></p>

			<ul>
				<li class=""><a href="/mypage/bookinglist" title="예매/구매내역">예매/구매내역</a></li>
				
				<li><a href="/mypage/moviestory">나의 무비스토리</a></li> 
				<li>
					<a href="/mypage/myinfo?returnURL=info" title="회원정보">회원정보</a>
					<ul class="depth3">
						<li><a href="/mypage/myinfo" title="개인정보 수정">개인정보 수정</a></li>
						<li><a href="/mypage/additionalinfo" 		title="선택정보 수정">선택정보 수정</a></li>
					</ul>
				</li>
			</ul>
		</nav>
	</div>




                






<style type="text/css">
	/* FDK 결제용 CSS */
	/*
	table { margin: 1em; border-collapse: collapse; }
	td, th { padding: .3em; border: 1px #ccc solid; font-size:12px; }
	thead { background: #fc9; }
	thead .white { background: #fff; }
	input { background-color: #ffffff; border: #bbbbbb 1px solid; font-size: 9pt; height: 20px; width: 250px;}
	select { background-color: #ffffff; border-bottom: #a5a4a4 1px solid; border-left: #a5a4a4  1px solid; border-right: #a5a4a4  1px solid; border-top: #a5a4a4 1px solid; font-size: 9pt; height: 20px }
	*/

	/* LAYER POPUP STYLE START */
	.fdLayer {display:none; position: absolute; left: 50%; height:auto;  background-color:#fff; border: 5px solid rgb(0, 66, 101); z-index: 10;}
	.fdLayer .fdContainer {padding: 3px;}
	.fdLayer .fdBtn {width: 100%; margin:10px 0 0; padding-top: 10px; border-top: 1px solid #DDD; text-align:right;}
	a.closeBtn {display:inline-block; height:25px; padding:0 14px 0; border:1px solid #304a8a; background-color:rgb(0, 32, 61); font-size:13px; color:#fff; line-height:25px;}
	a.closeBtn:hover {border: 1px solid #091940; background-color:#1f326a; color:#fff;}
	#mask { position:absolute; left:0; top:0; z-index:9; background-color:#000; display:none;}
	/* LAYER POPUP STYLE END */
</style>

<script type="text/javascript">

	var cancelParam = {};

	//========================================================================================
	//공통
	//========================================================================================

	// 접근 설정
	fn_com_setAccType = function(accType) {
		cancelParam.accType = accType;
	};

	// obj 객체 조회
	fn_com_getObj = function(obj, type) {
		return $(obj).closest(type);
	};

	// 예매 교환권
	fn_com_bokdInfoPop = function($obj) {

		if (cancelParam.accType == 'MY' && !sessionAllow( {sessionAt:true} )) return;

		var reqUrl = fn_getUrl('/MyBokdTicketChbndPopup.do?sellTranNo='+ $obj.attr('sell-tran-no'));

		window.open(reqUrl, '_blank', 'width=750,height=810,resizable=no');
	};

	// 결제내역
	fn_com_payInfoPop = function($obj, locale) {

		var paramData = {'tranNo' : $obj.attr('sell-tran-no')};

		if (locale != undefined) paramData.localeCode = locale;

		gfn_divLayPopUp({
			url       : fn_getUrl('/MyBokdPayInfoPopup.do'),
			params    : paramData,
			height    : '600',
			width     : '600',
			target_id : 'layer_payment_history',
			btn_id    : 'btn_paymentHistory'
		});
	};

	// 굿즈 수령내역
	fn_com_goodsAcptInfoPop = function($obj, locale) {

		var paramData = {'sellTranNo' : $obj.attr('sell-tran-no')};
		if (locale != undefined) paramData.localeCode = locale;

		gfn_divLayPopUp({
			url       : '/on/oh/ohh/MyBokdPurc/MyGoodsAcptListPopup.do',
			params    : paramData,
			height    : '500',
			width     : '490',
			target_id : 'layer_chk_theater',
			btn_id    : 'btn_chkTheater'
		});
	};

	// OK캐쉬백 적립
	fn_com_okCasRecPop = function(confirmFn, $obj) {

		var paramData = {'transNo' : $obj.attr('sell-tran-no')};
		var initParam = {callbackFn : confirmFn};

		gfn_divLayPopUp({
			url       : fn_getUrl('/MyBokdCashRecPopup.do'),
			params    : paramData,
			height    : '450',
			width     : '600',
			target_id : 'layer_okcash_after',
			btn_id    : 'btn_okcashAfter',
			initFn    : 'savePointRecInit',
			initParam : initParam,
		});
	};

	// 예매목록 조회
	fn_com_makeHtmlForBokdList = function(paramData) {

		// 값 조회
		$.ajaxMegaBox({
			url      : fn_getUrl('/selectBokdList.do'),
			data     : JSON.stringify(paramData),
			success  : function (data, textStatus, jqXHR) {

				fn_makeHtmlForBokdList(paramData, data);
			}
		});
	};

	// 구분에 따른 URL 생성
	function fn_getUrl(url) {

		switch(cancelParam.accType) {
		case 'NON' : return '/on/non/NonMbBokd'     + url;  break;
		default    : return '/on/oh/ohh/MyBokdPurc' + url;
		}
	}

	// 예매목록 생성
	function fn_makeHtmlForBokdList(paramData, data) {

		var $li, html;

		var arr = [];

		if (data.list.length == 0) {

			html  = '';
			html += '<div class="no-history-reservation mt20">';
			html += '	예매 내역이 없습니다. ';
			html += '</div>';
			
			$('#bokdList').html(html);

			return;
		}

		$.each(data.list, function(i, param) {

			var privPackList = '';

			arr.push($li = $(getBokdHtml()));

			// 버튼노출 스위치용
			param.buttonCd = (paramData.divCd == 'E' || param.playAt == 'N')? 'ETC' : param.hotdealStatCd;

			// 이미지 여부
			$li.find('a:first').attr({'href' : '/movie-detail?rpstMovieNo='+ param.rpstMovieNo, 'title' : param.movieNm +' '});
			$li.find('a:first').html('<img src="'+ data.imgSvrUrl + param.imgPath +'" alt="'+ param.movieNm +'" onerror="noImg(this)">');

			// 핫딜상태코드
			switch(param.hotdealStatCd) {
			case 'HDS01' : //핫딜진행
				param.bokdTitle    = '거래번호';  
				param.bokdNoFormat = param.sellTranNo;          //거래번호로 변경
				break;
			default      :
				param.bokdTitle    = '예매번호';  
				param.bokdNoFormat = (param.bokdNo || '').bokdFormat();
			}

			// 버튼 노출 변경
			switch(param.buttonCd) {
			case 'HDS01' : //핫딜진행
				$li.find('div.btn-group a.purple').remove();     //교환권출력 삭제
				break;
			case 'HDS02' : //핫딜성공
				$li.find('div.btn-group a.gray').remove();       //예매취소 삭제
				break;
			case 'ETC'   : //추가조건
				$li.find('div.btn-group a.purple').remove();     //교환권출력 삭제
				$li.find('div.btn-group a.gray').remove();       //예매취소 삭제
				break;
			}

			// OK캐시백 적립 버튼
			if (Number(nvl(param.okSaveAmt)) > 0) {
				$li.find('div.btn-group').prepend('<a href="" name="btnOkCashRec" class="button">제휴포인트 추후 적립</a>');
			}

			// 식음료 신청정보
			if('Y' == param.drnkAddStatCd && param.theabKindCd.indexOf('TBP') > -1){
				if(param.privPackList != null){
					var parivPackSplitList = param.privPackList.split(',');
					// 내용 생성
					$.each(parivPackSplitList, function(i, param) {
						privPackList += '<dd>' + param +'</dd>';
					});
					privPackList +='<dt>' + '총 ' + parivPackSplitList.length +'건'+'</dt>';
				}

			} else if(param.theabKindCd.indexOf('TBP') == -1){
				param.title = '관람좌석';         
				param.noti  = param.seatNm;
			}

			// 값 설정
			$li.attr({'sell-tran-no' : param.sellTranNo});

			//************************
			// 관람정보
			//************************
			html  = '';
			html += '<tr>';
			html += '	<th scope="row" class="a-r">'+ param.bokdTitle +'</th>';
			html += '	<td colspan="3">';
			html += '		<em class="num">'+ param.bokdNoFormat +'</em>';
			if(param.goodsAcptChk == 'Y') { //굿즈 수령완료
				html += '	<span class="goodsGet">굿즈 수령 완료</span>';
            }
			html += '	</td>';
			html += '</tr>';
			html += '<tr>';
			html += '	<th scope="row" class="a-r">영화명</th>';
			html += '	<td colspan="3">';
			html += '		<p class="tit-movie">';
			html += '			<span>'+ param.movieNm     +'</span>';
			html += '			<span>'+ param.movieKindNm +'</span>';
			html += '		</p>';
			html += '	</td>';
			html += '</tr>';
			html += '<tr>';
			html += '	<th scope="row" class="a-r">극장/상영관</th>';
			html += '	<td>'+ param.brchNm +'/'+ param.theabNm +'</td>';
			html += '	<th scope="row">관람인원</th>';
			html += '	<td>'+ param.admisPcnt +'</td>';
			html += '</tr>';
			html += '<tr>';
			html += '<th scope="row" class="a-r">관람일시</th>';
			html += '	<td>'+ param.playDt.megaFormat('kr') +' ('+ param.playSeq +'회차)</td>';

			if(param.theabKindCd.indexOf('TBP') == -1){		// 부티크가 아닌경우만

				html += '	<th scope="row">'+ param.title +'</th>';
				html += '	<td>'+ param.noti +'</td>';
			}
			html += '</tr>';
			if(param.goodsAcptChk == 'Y') {//굿즈 수령완료
				html += '<tr>';
				html += '<th>굿즈 수령</th>';
				html += '<td>';
				// html += '<a href="#" onclick="fn_goodsGetListDtl(\''+param.sellTranNo+'\')" class="goodsGetView" data-gn="'+param.sellTranNo+'">굿즈수령내역 확인</a>';
				html += '<a href="#" class="goodsGetView" name="goodsGetView" data-gn="'+param.sellTranNo+'">굿즈수령내역 확인</a>';
				html += '</td>';
				html += '</tr>';
			}

			if(privPackList.length > 0){
				html += '<th scope="row" class="a-r va-t" style="padding-top:8px;">패키지 신청</th>';
				html += '	<td class="newTd"><dl class="dot_list">'+ privPackList +'</dl></td>';
				html += '</tr>';
			}


			$li.find('table:eq(0) tbody').html(html);

			//************************
			// 결제정보
			//************************
			param.point = {title : '', value : ''}; //ie디자인오류로 빈값으로변경

			if (paramData.divCd == 'B' && cancelParam.accType != 'NON' && param.resvrPoint != '0') {
				param.point = {title : '적립예정 포인트', value : param.resvrPoint.format() + ' P'};
			}

			html  = '';
			html += '<tr>';
			html += '	<th scope="row" class="a-r">결제일시</th>';
			html += '	<td>'+ (param.payDe || '').maskDate();
			html += '		<a href="#" class="button gray-line x-small" title="결제정보">결제정보</a>';
			html += '	</td>';
			html += '	<th scope="row">'+ param.point.title +'</th>';
			html += '	<td>'+ param.point.value +'</td>';
			html += '</tr>';

			$li.find('table:eq(1) tbody').html(html);
		});

		//************************
		// 기본 구조
		//************************
		html  = '';
		html += '<div class="board-list-util">';
		html += '	<p class="result-count pt00">';
		html += '		<strong>';
		html += '			총';
		html += '			<b class="font-gblue">'+ data.list[0].totCnt +'</b>건';
		html += '		</strong>';
		html += '	</p>';
		html += '</div>';
		html += '<div class="history-reservation">';
		html += '	<ul></ul>';
		html += '</div>';

		$('#bokdList').html(html);

		$('#bokdList ul').html(arr);

	}

	// html 기본 틀
	function getBokdHtml() {

		var html = '';

		html += '<li>';
		html += '	<div class="round">';
		html += '		<a href="#" class="img" title="예매목록"></a>';
		html += '		<table class="table">';
		html += '			<colgroup>';
		html += '				<col style="width:75px;">';
		html += '				<col style="width:230px;">';
		html += '				<col style="width:80px;">';
		html += '				<col>';
		html += '			</colgroup>';
		html += '			<tbody>';
		html += '			</tbody>';
		html += '		</table>';
		html += '		<div class="bg-round">';
		html += '			<table class="table">';
		html += '				<colgroup>';
		html += '					<col style="width:75px;">';
		html += '					<col style="width:230px;">';
		html += '					<col style="width:100px;">';
		html += '					<col>';
		html += '				</colgroup>';
		html += '				<tbody>';
		html += '				</tbody>';
		html += '			</table>';
		html += '		</div>';
		html += '		<div class="btn-group">';
		html += '			<a href="" title="" class="button purple" name="btnTicketChbnd">교환권출력</a>';
		html += '			<a href="" class="button gray" name="btnCancelBokd" title="예매취소">예매취소</a>';
		html += '		</div>';
		html += '	</div>';
		html += '</li>';

		return html;
	}

	// 취소된 예매 리스트 생성
	fn_com_makeHtmlforCancelBokdList = function() {

		var options = {};

		// 네이게이션 ID
		options.navId = '#navBokd';

		// 호출 URL
		options.url = fn_getUrl('/selectCancelBokdList.do');

		options.paramData = {'localeCode' : 'kr'};

		// 그리기
		options.successCallBack = function( data, textStatus, jqXHR ) {

			var html = '';

			// 기본값
			if (data.list.length == 0) {
				html = '<tr><td colspan="5" class="a-c">취소내역이 없습니다.</td></tr>';
			}

			// 내용 생성
			$.each(data.list, function(i, param) {

				if (param.playDt    == null) param.playDt    = '';
				if (param.rfndDe    == null) param.rfndDe    = '';
				if (param.sellEndDe == null) param.sellEndDe = '';

				html += '<tr>';
				html += '	<td>'+ (param.rfndDt || '').payDtFormat() +'</td>';
				html += '	<th scope="row">'+ param.movieNm +'</th>';
				html += '	<td>'+ param.brchNm +'</td>';
				html += '	<td>'+ param.playDt.megaFormat('kr') +'</td>';
				html += '	<td class="a-r">';
				html += '		<span class="font-red">'+ param.prdtAmt.format() +'원</span>';
				html += '	</td>';
				html += '</tr>';
			});

			// html 설정
			$(options.navId).prev().find('tbody').html(html);
		};

		// page 이벤트 연결
		gfn_setPage(options);

	};

	//========================================================================================
	//기프트카드 선물취소 체크
	//========================================================================================
	fn_giftcard_cancel_chk = function(confirmFn, $obj){
		cancelParam.confirmFn = confirmFn;

		var paramData = {'transNo' : $obj.attr('sell-tran-no')};

		if($obj.attr('sell-prdt-kind-cd') == 'SPD61'){

			// 로딩생성
			gfn_logdingModal();

			$.ajaxMegaBox({
				url      : '/on/oh/ohz/PayStore/giftCardCancelChk.do',
				data     : JSON.stringify(paramData),
				clickLmtChk: true, //중복클릭 방지 실행
				success  : function (data, textStatus, jqXHR) {

					// 로딩삭제
					gfn_logdingModal();

					var totCnt = parseInt(data.returnMap.totCnt);
					var sgntCnt = parseInt(data.returnMap.sgntCnt);

					if(totCnt > 0 && sgntCnt > 0){
						gfn_alertMsgBox('선물하신 기프트카드가 등록되어 구매취소가 불가합니다.');
						return;
					} else {
						fn_com_cancelPurc(confirmFn, $obj);
					}
				},
				complete: function(xhr){
					clearLmt(); //중복제한 초기화
				}
			});
		} else {
			fn_com_cancelPurc(confirmFn, $obj);
		}
	}

	//========================================================================================
	//구매취소
	//========================================================================================
	fn_com_cancelPurc = function(confirmFn, $obj) {

		cancelParam.confirmFn = confirmFn;

		gfn_confirmMsgBox('취소 시 유효기간 경과된 포인트는 복구되지 않습니다.\n구매취소 하시겠습니까?', function() {
			var paramData = {'transNo' : $obj.attr('sell-tran-no')};
			// 로딩생성
			gfn_logdingModal();

			$.ajaxMegaBox({
				url      : '/on/oh/ohz/PayStore/cancelStorePayment.do',
				data     : JSON.stringify(paramData),
				clickLmtChk: true, //중복클릭 방지 실행
				success  : function (data, textStatus, jqXHR) {

					// 로딩삭제
					gfn_logdingModal();

					if (data.statCd == 0) {
						gfn_alertMsgBox('구매취소 되었습니다.', function() {
							if (cancelParam.confirmFn != null) cancelParam.confirmFn();
						});
					} else {
						gfn_alertMsgBox(data.msg);
					}
				},
		        complete: function(xhr){
		         	clearLmt(); //중복제한 초기화
		        }
			});
		});
	};

	//========================================================================================
	//환불수수료 결제 - 예매
	//========================================================================================
	// 예매 - 환불수수료 확인
	fn_com_cancelBokd = function(confirmFn, $obj) {

		cancelParam.confirmFn = confirmFn;
		cancelParam.paramData = { 'sellChnlCd' : ''
								, 'transNo'    : $obj.attr('sell-tran-no')
								, 'sellTranNo' : $obj.attr('sell-tran-no')};

		// 수수료 확인
		$.ajaxMegaBox({
			url     : fn_getUrl('/selectMyBokdRfndFee.do'),
			data    : JSON.stringify(cancelParam.paramData),
			clickLmtChk: true, //중복클릭 방지 실행
			success : function (data, textStatus, jqXHR) {

				// 환불정보
				cancelParam.info = data.info;
				var nonData = {'callUrl': data.info.callUrl
						, 'cancelAt'   : data.info.cancelAt
						, 'refundAmt'  : data.info.refundAmt
						, 'transNo'    : $obj.attr('sell-tran-no')
						, 'sellTranNo' : $obj.attr('sell-tran-no')};

				switch(data.info.cancelAt) {
				case 'N' : //예매취소 불가
					if (data.info.rtnMsg != '') gfn_alertMsgBoxSize(data.info.rtnMsg, 400);
					break;
				case 'Y' : //예매취소 가능
					gfn_confirmMsgBox('취소 시 유효기간 경과된 관람권, 쿠폰, 포인트는 복구되지 않습니다.\n예매취소 하시겠습니까?', function(){ fn_nextCancelBokd()});
					break;
				case 'P' : //환불수수료 팝업
					gfn_divLayPopUp({
						url       : '/on/oh/ohz/PayBooking/MyBokdRfndFeePopup.do',
						height    : '380',
						width     : '600',
						params    : nonData,
						initFn    : 'myBokdRfndFeeInit',
						initParam : {callbackFn : function() {

								// 환불수수료
								cancelParam.paramData.refundAmt = cancelParam.info.refundAmt;
								// 환불수수료 선결제처리
								fn_preRefund();
							}
						}
					});
				}
			},
	        complete: function(xhr){
	         	clearLmt(); //중복제한 초기화
	        }
		});
	};

	// 환불수수료 선결제처리
	function fn_preRefund(){

		$.ajaxMegaBox({
			contentType  : 'application/json;charset=UTF-8',
			url          : '/on/oh/ohz/PayBooking/prepareRefund.do',
			data         : JSON.stringify(cancelParam.paramData),
			success      : function (data, textStatus, jqXHR) {
				if (data.statCd != 0) {
					gfn_alertMsgBox(data.msg);
					return;
				}

				//fdk 결제 팝업 생성
				fdkPayProc(cancelParam.paramData.transNo);
			},
			error: function(xhr,status,error){
				var err = JSON.parse(xhr.responseText);
				gfn_alertMsgBox(err.msg);
			}
		});
	}

	// 예매취소
	function fn_nextCancelBokd() {

		// 로딩생성
		gfn_logdingModal();

		$.ajaxMegaBox({
			url     : cancelParam.info.callUrl,
			data    : JSON.stringify(cancelParam.paramData),
			success : function (data, textStatus, jqXHR) {

				// 로딩삭제
				gfn_logdingModal();

				if (data.returnMap.statCd == '0') {
					gfn_alertMsgBox('예매가 취소되었습니다.', function() {
						if (cancelParam.confirmFn != null) cancelParam.confirmFn();
					});
				} else {
					gfn_alertMsgBox(data.returnMap.msg);
				}
			}
		});
	}

	// FDK호출
	function fdkPayProc(transNo) {

		//FDK 결제 창 호출 페이지로 프레임 영역 변경
		FD_PAY_FRAME.location.href = '/on/oh/ohz/PayBooking/applyRefundCreditCard.do?transNo='+transNo;

		//"FD_PAY_FRAME" 프레임을 가지고 있는 DIV 영역의 ID를 입력(sample 이용 시 : id="fdpayWin")
		layer_open('fdpayWin');
	}

	// 레이어 팝업 호출 시 처리
	function layer_open(el){
		wrapWindowByMask();         //레이어 팝업 활성화 시 하단 MASKING 처리를 위한 함수

		var fdlayer = $('#' + el);  //레이어의 id를 fdlayer변수에 저장
		fdlayer.fadeIn();           //레이어 실행

		// 화면의 중앙에 레이어를 띄운다.
		fdlayer.css('margin-top' , '-'+fdlayer.outerHeight()/2+'px');
		fdlayer.css('margin-left', '-'+fdlayer.outerWidth() /2+'px');
		fdlayer.center();
		fdlayer.find('a.closeBtn').click(function(e){
			fdlayer.fadeOut();                                          //'Close'버튼을 클릭하면 레이어가 사라진다.
			e.preventDefault();
			document.getElementById('mask').style.display = 'none';     //레이어 팝업 비활성화 시 하단 MASKING 표시 해제
			FD_PAY_FRAME.location.href = '/on/oh/ohz/PayBooking/blank.do'; //빈 페이지로 프레임 영역 변경
		});
	}

	//레이어 팝업 하단 영역 마스킹 처리(레이어 팝업 호출 시 사용)
	function wrapWindowByMask(){
		//화면의 높이와 너비를 구한다.
		var maskHeight = $(document).height();
		var maskWidth  = $(window).width();

		//마스크의 높이와 너비를 화면 것으로 만들어 전체 화면을 채운다.
		$('#mask').css({'width':maskWidth,'height':maskHeight});

		//애니메이션 효과
		$('#mask').fadeIn(1000);
		$('#mask').fadeTo('slow',0.6);
	}

	// 최종결제
	function fdkAuthResult(fdkResultData) {

		//오류시 alert 메시지 팝업 후 레이어 닫기
		if (fdkResultData.Code != '0000') {
			gfn_alertMsgBox({ msg: fdkResultData.Msg });
			$('#fdpayWin').find('a.closeBtn').click();
			return false;
		} else {
			//승인요청중 close버턴클릭문제 (승인요청전 레이어만 사라지게 처리한다)
			$('#fdpayWin').fadeOut();
		}
		var transNo = cancelParam.paramData.transNo;

		var paramData = {transNo:transNo, Code:fdkResultData.Code, Msg:fdkResultData.Msg , FDTid:fdkResultData.FDTid };
		$.ajax({
			url        : '/on/oh/ohz/PayBooking/execRefundPayment.do',
			type       : 'POST',
			contentType: 'application/json;charset=UTF-8',
			dataType   : 'json',
			data       : JSON.stringify(paramData),
			success    : function (data, textStatus, jqXHR) {
				//최종 결제 테스트
				if (data.statCd != '0') {
					gfn_alertMsgBox({ msg: data.msg });
				} else {
					//예매취소
					fn_nextCancelBokd();
				}
				$('#fdpayWin').find('a.closeBtn').click();

			},
			error       : function(xhr,status,error){
				gfn_logdingModal();
				var err = JSON.parse(xhr.responseText);
				//err.statCd 에 따라서 이전화면으로 리턴 가능토록
				gfn_alertMsgBox({ msg: err.msg });
				$('#fdpayWin').find('a.closeBtn').click();
			}
		});
	}

	jQuery.fn.center = function () {
		this.css('position','absolute');
		this.css('top', Math.max(0, (($(window).height() - $(this).outerHeight()) / 2) + $(window).scrollTop()) + 350 + 'px');
		return this;
	}

</script>

<!-- 레이어 팝업 처리 시 화면 영역 시작 -->
<div id="mask"></div>
<div id="fdpayWin" class="fdLayer">
	<div class="fdContainer">
		<div class="pop-conts">
			<iframe id="FD_PAY_FRAME" name="FD_PAY_FRAME" title="결제팝업창" frameborder="1" width="560" height="600" style="background-color:#FFFFFF;"></iframe>
			<div class="fdBtn">
				<a href="#" class="closeBtn" title="Close">Close</a>
			</div>
		</div>
	</div>
</div>
<!-- 레이어 팝업 처리 시 화면 영역 끝 -->

<script>
	$(function() {

		// 접근자 설정 : 중요!!!
		fn_com_setAccType('MY');

		// 이벤트 버블현상 공통 제거
		$('#contents').on('click', 'a', function(e) {

			if ($(this).attr('href').indexOf('/') == -1) {
				e.preventDefault();
			}
		});

		

		// 지난 등급 조회
		$('#bfrClassSearch').click(function(){

			var $layer = $('section#layer_before_grade');

			$.ajaxMegaBox({
				url      : '/on/oh/ohh/MyScnBoard/selectMbClassHistory.do',
				success  : function (data, textStatus, jqXHR) {

					if (data.dataList.length > 0) {
						// var h_data = ( 505 - 129 - 150 ) + ( data.dataList.length * 43 );
						// $layer.find('div.overBox').css('height' ,h_data + 'px');
						$layer.find('div.head').html('<ul><li>승급 년월</li><li>등급</li></ul>');
						$layer.find('div.body').html(data.dataList.map(function(o,i) {
							if(o['riseMonth'] !== undefined) {
								if(o['mbClassNm'] === 'FRNS') {
									return '<ul><li>' + o['riseYear']+'.'+ o['riseMonth'] + '</li><li>FRIENDS</li></ul>'
								} else if(o['mbClassNm'] === 'NORMAL') {
									return '<ul><li>' + o['riseYear']+'.'+ o['riseMonth'] + '</li><li>WELCOME</li></ul>'
								} else {
									return '<ul><li>' + o['riseYear']+'.'+ o['riseMonth'] + '</li><li>' +  o['mbClassNm'] + '</li></ul>'
								}
							} else {
								return '<ul><li>' + o['riseYear'] + '</li><li>' +  o['mbClassNm'] + '</li></ul>'
							}
						}).join(' '))
					} else {
						$layer.find('div.body').html('<ul>등급 변경 내역이 없습니다.</ul>');
					}
				}
			});
		});

		// 선호극장 > 변경
		$('#myFaverBrch a').click(function() {

			gfn_favorBrchReg(function(param) {

				var data = {favorInfo : {mbFavorBrchList : param}};

				makeHtmlForFaverInfo(data, 'B');
			});
		});

		// 스템프미션 > 지난미션 보기
		$('#myStamp .passMission').click(function() {

			var option = {
				url    : '/on/oh/ohh/MyScnBoard/MyVipEventPopup.do',
				height : 800,
				width  : 600
			}

			gfn_divLayPopUp(option);
		});

		// 선호관람정보 > 설정
		$('#myFaverInfo a').click(function() {

			var option = {
				url       : '/on/oh/ohh/MyScnBoard/MyBrchFavorPopup.do',
				height    : 300,
				width     : 600,
				initFn    : 'faverInfoInit',
				initParam : {callbackFn : function(param){

					var arrTime  = new Array();
					var arrGenre = new Array();

					var data = {favorInfo : {mbFavorTimeList : arrTime, mbFavorGenreList : arrGenre}};

					$.each(param, function(i, data) {

						if (data.favorDivCd == 'FDC03') arrTime.push(data);
						if (data.favorDivCd == 'FDC01') arrGenre.push(data);
					});

					makeHtmlForFaverInfo(data, 'I');
				}}
			}

			gfn_divLayPopUp(option);
		});

		// 나의 예매내역 > 예매취소
		$('#myBokd').on('click', 'button', function() {

			// 예매취소 호출
			fn_com_cancelBokd(function(){ fn_myScnBoardInfo('bokd'); }, $(this));
		});

		// 나의 구매내역 > 구매취소
		$('#myPurc').on('click', 'button', function() {

			// 구매취소 호출
			fn_giftcard_cancel_chk(function() { fn_myScnBoardInfo('purc'); }, $(this));
		});

		$(document).ready(function(){

			// 조회
			fn_myScnBoardInfo();

			// 본 영화 등록 이벤트 매핑
			MegaboxUtil.Movie.bindMyViewMovieEvent('regBtn', function(){});
		});
	});

	// 메인조회
	function fn_myScnBoardInfo(acc) {

		var url = '/on/oh/ohh/MyScnBoard/selectMyScnBoardInfo.do';

		if (acc != undefined) {
			switch(acc) {
			case 'bokd' : url = '/on/oh/ohh/MyScnBoard/selectBokdList.do'; break;
			case 'purc' : url = '/on/oh/ohh/MyScnBoard/selectPurcList.do'; break;
			}
		}

		$.ajaxMegaBox({
			url      : url,
			success  : function (data, textStatus, jqXHR) {

				switch(acc) {
				case 'purc' :
					makeHemlForPurcList      (data); //구매 리스트
					break;
				case 'bokd' :
					makeHtmlForBokdList      (data); //예매 리스트
					break;
				default     :
					makeHtmlForCustInfo      (data); //회원정보
					makeHtmlForMembershipInfo(data); //멤버십 정보
					makeHtmlForPointInfo     (data); //포인트 정보
					makeHtmlForFaverInfo     (data); //선호 정보
					makeHtmlForCouponInfo    (data); //관람권/쿠폰 정보
					makeHtmlForStempInfo     (data); //스탬프 정보
					makeHtmlForStoryInfo     (data); //무비스토리 정보
					makeHtmlForBokdList      (data); //예매 리스트
					makeHemlForPurcList      (data); //구매 리스트
					makeHtmlForSbcList       (data); //이벤트 리스트
					makeHtmlForInqList       (data); //문의 리스트
				}
			}
		});
	}

	// 회원정보
	function makeHtmlForCustInfo(data) {

		

		var param = data.custInfo;
		var mbClassIndex = 0;
		const restTotPoint = data.vipBehavireInfo.restTotPoint;
		const numRestTotPoint = restTotPoint.replace(",", "");
		// 이미지 설정
		// $('#myPhoto img').attr('src', 'https://img.megabox.co.kr' + param.mbProfilImgPath);
		// $('#myPhoto img').attr('alt', param.mbNm);

		// 등급
		/* 안녕하세요! 수정위해 주석 2023-10-18 $('#contents .mb_name').html('안녕하세요!<p>'+ param.mbNm +'<span>님</span></p>'); */
		 $(document).ready(function() {
        var username = $('#contents .mb_name').text();
        $('#contents .mb_name').html('안녕하세요!<p>' + username + '<span>님</span></p>');
    	});
		
		
		 /* 안녕하세요! 수정위해 주석 */
		$('#contents .mbimg').html('<img src="https://img.megabox.co.kr/static/pc/images/2023/01/member_'+ param.mbClassNm +'_2.png" alt="'+ param.mbClassNm +'" />');
		$('#contents .rightBox .nowClass').html('<span>현재등급</span><em>'+ param.mbClassNm +'</em>');

		// 등급유지기간
		if(data.mntncPeriodInfo != null && data.mntncPeriodInfo != undefined) {
			$('#contents .continue').html('<span>유지기간</span><em>'+ data.mntncPeriodInfo.validStartYear +'. ' + data.mntncPeriodInfo.validStartMonth +' 부터 ' + data.mntncPeriodInfo.validEndYear + '. '+ data.mntncPeriodInfo.validEndMonth +' 까지</em>')
		}

		// 지난등급팝업 설정
		$('#layer_before_grade .mbName').html(param.mbNm);
		$('#layer_before_grade .mbClass').html(param.mbClassNm +'등급');


		// VIP 쿠폰 발급여부체크 및 회원 등급 체크 (VIP쿠폰북 미발급상태, VIP등급 이상일때만 노출)
		if (data.vipCopnIssueAt != 'Y' && param.mbClassCd != 'NORMAL' && param.mbClassCd != 'FRNS' ) {
			$('#contents .vipCoup').show();
		}

		var rightBox = $('.rightBox');

		if(param.mbClassNm == 'WELCOME') {
			mbClassIndex = 0;
			// 승급까지의 잔여 포인트
			if(numRestTotPoint > 0) {
				$('#pointFlag-list .pointFlag').html('<span>다음 Friends 등급까지 '+ restTotPoint +' P 남았어요!</span>');
			} else {
				$('#pointFlag-list .pointFlag').html('<span>목표를 달성하셨어요! 다음달 등급은 FRIENDS 등급이에요!</span>');
			}
		}else if(param.mbClassNm == 'FRIENDS'){
			mbClassIndex = 1;
			if(numRestTotPoint > 0) {
				$('#pointFlag-list .pointFlag').html('<span>다음 VIP 등급까지 '+ restTotPoint +' P 남았어요!</span>');
			} else {
				$('#pointFlag-list .pointFlag').html('<span>목표를 달성하셨어요! 다음달 등급은 VIP 등급이에요!</span>');
			}
		}else if(param.mbClassNm == 'VIP'){
			mbClassIndex = 2;
			if(numRestTotPoint > 0) {
				$('#pointFlag-list .pointFlag').html('<span>다음 VVIP 등급까지 '+ restTotPoint +' P 남았어요!</span>');
			} else {
				$('#pointFlag-list .pointFlag').html('<span>목표를 달성하셨어요! 다음달 등급은 VVIP 등급이에요!</span>');
			}
		}else if(param.mbClassNm == 'VVIP'){
			mbClassIndex = 3;
			$('#pointFlag-list .pointFlag').html('<span>VVIP 등급까지 달성했어요!</span>');
		}else if(param.mbClassNm == 'MVIP'){
			mbClassIndex = 4;
			$('#pointFlag-list .pointFlag').html('<span>MVIP 등급까지 달성했어요!</span>');
		}

		rightBox.addClass('mbClassInx'+mbClassIndex);

		for (var i = 0; i <= mbClassIndex; i++) {
			rightBox.find('.list li').eq(i).addClass('on');
		}

		rightBox.find('.list li').eq(mbClassIndex).addClass('act');


	}

	// 멤버십 정보 생성
	function makeHtmlForMembershipInfo(data) {

		var html = '';

		if (data.mbshipJoinInfo.length == 0) return;

		// 리스트 생성
		$.each(data.mbshipJoinInfo, function(i, param) {

			if(param.svcTyCd == 'SMT01') {
				html += '<div class="box">';
				html += '	<img src="https://img.megabox.co.kr/static/pc/images/2023/01/my_dashboard_so_01.png" alt="filmsociety" />';
				html += '</div>';
			}

			if(param.svcTyCd == 'SMT02') {
				html += '<div class="box">';
				html += '	<img src="https://img.megabox.co.kr/static/pc/images/2023/01/my_dashboard_so_02.png" alt="classic society" />';
				html += '</div>';
			}
		});

		// 값 설정
		$('#myMembership .no-join').attr('class', 'join').html(html);
	}

	// 포인트 정보 생성
	function makeHtmlForPointInfo(data) {

		var $div  = $('#myPoint');
		var param = data.pointInfo;

		if (param.length == 0) return;

		// 기본 포인트
		$('.rightBox .totalPoint').html(param.totHoldPoint.format()  + ' P'); //총포인트
		$div.find('.save em').html(param.resvrDuePoint.format() + ' P'); //적립예정
		$div.find('.del  em').html(param.expirDuePoint.format() + ' P'); //소멸예정

		// 구포인트가 남아 있을때 신/구포인트 노출
		// if (param.oldPoint > 0) {
		// 	$div.find('.division .old em').html(param.oldPoint.format() +' P'); //구포인트
		// 	$div.find('.division .new em').html(param.newPoint.format() +' P'); //신포인트
		// 	$div.find('.division').show();
		// }
	}

	// 선호 정보 생성
	function makeHtmlForFaverInfo(data, type) {

		var html = '';

		var arrGenre = new Array();
		var arrTime  = new Array();

		// 선호 정보
		if (data.favorInfo == undefined) return;

		if (type == undefined || type == 'B') {

			var $div = $('#myFaverBrch');

			// 선호극장
			$.each(data.favorInfo.mbFavorBrchList, function(i, param) {

				if (type == 'B') {
					param.favorCdNm = param.favorNmVal;
					param.rank      = param.favorRank;
				}

				if (param.favorCdNm == null) return false;

				html += '<li>';
				html += '	<em>'  + param.rank      +'</em>';
				html += '	<span>'+ param.favorCdNm +'</span>';
				html += '</li>';
			});

			// 선호극장 설정
			$div.find('ol').html(html);

			if (html == ''){
				$div.find('.no-list').show();
			}
		}

		// 선호관람정보
		if (type == undefined || type == 'I') {

			var $li = $('#myFaverInfo li');

			// 선호관람정보 > 내 선호장르
			$.each(data.favorInfo.mbFavorGenreList, function(i, param) {

				if (param.favorCdNm != null) arrGenre.push(param.favorCdNm);
			});

			// 선호관람정보 > 내 선호시간
			$.each(data.favorInfo.mbFavorTimeList, function(i, param) {

				if (param.favorCdNm != null) arrTime.push(param.favorCdNm);
			});

			if (type == 'I') {
				$li.eq(0).html($li.find('span').eq(0));
				$li.eq(1).html($li.find('span').eq(1));
			}

			// 선호장르, 선호극장 설정
			$li.eq(0).append(arrGenre.join(', '));
			$li.eq(1).append(arrTime.join(', '));
		}
	}

	// 관람권/쿠폰 정보 생성
	function makeHtmlForCouponInfo(data) {

		var $div  = $('#myCoupon');
		var param = data.cponInfo;

		if (param.length == 0) return;

		// 할인+제휴
		param.dcCponHoldCnt = param.cponCnt + param.othcomCponCnt + param.adCponCnt;

		$div.find('.list em').eq(0).html(param.movieMvtchkHoldCnt + ' 매'); //영화관람권
		$div.find('.list em').eq(1).html(param.storeChbndHoldCnt  + ' 매'); //스토어교환권
		$div.find('.list em').eq(2).html(param.dcCponHoldCnt      + ' 매'); //할인/제휴쿠폰
	}

	// 스탬프 정보 생성
	function makeHtmlForStempInfo(data) {

		// VIP 스템프
		if (data.stampInfo == undefined) return;

		var $div  = $('#myStamp');

		var html  = '';
		var param = data.stampInfo.info;

		// 성공여부
		if (param.admisSuccAt == 'Y'){
			$div.find('.bg-vip-mission-success').show();
			$div.find('.period').hide();
		}

		// 스템프미션 기보정보 설정
		// $div.find('.tit-area').css('visibility', '');
		$div.find('em').html(param.admisMonth + '월');
		$div.find('.succPeriod').html(param.playStrDe + '~' +param.playEndDe);
		$div.find('.period').html('<span>기간</span>'+ param.playStrDe + '~' +param.playEndDe);

		$div = $div.find('.list-stamp');

		// 스템프 리스트 생성
		$.each(data.stampInfo.list, function(i, param) {

			html  = '';
			html += '<p class="txt">';
			html += '	<em>'  + param.movieNm  +'</em>';
			html += '	<span>'+ param.admisDay +'</span>';
			html += '</p>';

			$div.find('.bg'  ).eq(i).html($('<img>').attr({'src' : 'https://img.megabox.co.kr' + param.imgPath, 'onerror' : 'noImg(this, "del");'}));
			$div.find('.cell').eq(i).append(html);
		});
	}

	// 무비스토리 정보 생성
	function makeHtmlForStoryInfo(data) {

		var $div  = $('#myStory');
		var param = data.movieStoryInfo;

		if (param.length == 0) return;

		$div.find('em').eq(0).html(param.admisMovieCnt.cnt  ); //본영화
		$div.find('em').eq(1).html(param.onelnEvalCnt.cnt  ); //한줄평
		$div.find('em').eq(2).html(param.intrstMovieCnt.cnt ); //보고싶어
		$div.find('em').eq(3).html(param.moviePostCnt.cnt); //무비포스트
	}

	// 예매 리스트 생성
	function makeHtmlForBokdList(data) {

		var html = '';
		var $li  = $('#myBokd li.no-result');

		switch(data.bokdList.length){
		case 0  : $li.show().nextAll().remove(); return;
		default : $li.hide().nextAll().remove();
		}

		$.each(data.bokdList, function(i, param) {

			// 핫딜 진행중 - 결제번호 노출
			if (param.hotdealStatCd == 'HDS01') {
				param.bokdNoFormat = param.sellTranNo;
			} else {
				param.bokdNoFormat = (param.bokdNo||'').bokdFormat();
			}

			// 핫딜 성공 - 예매취소 버튼 비노출
			if (param.hotdealStatCd == 'HDS02') {
				param.playAt = '';
			}

			// 영화종류명
			if (param.movieKindNm != null) {
				param.movieNm += '/'+ param.movieKindNm;
			}

			// 영화이벤트명
			if (param.movieEventTyNm != null) {
				param.movieNm += '/'+ param.movieEventTyNm;
			}

			html += '<li>';
			html += '	<p class="img"><img src="https://img.megabox.co.kr'+ param.imgPath +'" alt="'+ param.movieNm +'" onerror="noImg(this);"></p>';
			html += '	<div class="cont">';
			html += '		<p class="pay">결제일시 : '+ (param.payDt || '').payDtFormat() +'</p>';
			html += '		<p class="ticket">';
			html += '			<em>'+ param.bokdNoFormat +'</em>';
			html += '			<span>'+ param.movieNm +'</span>';
			html += '		</p>';
			html += '		<p class="theater">'+ param.brchNm +'/'+ param.theabNm +'</p>';
			html += '		<p class="date">'+ param.playDt.megaFormat() +'('+ param.playSeq +'회차)</p>';
			html += '	</div>';
			html += '	<div class="util">';

			switch(param.playAt){
			case 'N' : html += '<span class="saw"></span>'; break;
			case 'Y' : html += '<button class="button small gray-line" sell-tran-no="'+ param.sellTranNo + '">예매취소</button>';
			}

			html += '	</div>';
			html += '</li>';
		});

		$('#myBokd ul').append(html);
	}

	// 구매 리스트 생성
	function makeHemlForPurcList(data) {

		var html = '';

		if (data.pureInfo.length == 0){
			html = '<tr><td colspan="6" class="a-c">구매내역이 없습니다.</td></tr>';
		}

		$.each(data.pureInfo, function(i, param) {

			html += '<tr>';
			html += '	<td>'+ (param.payDt || '').payDtFormat() +'</td>';
			html += '	<td>'+ param.prdtClNm +'</td>';
			html += '	<th scope="row">'+ param.prdtDivNm +'</th>';
			if(param.prdtAmt == 0){
				html += '	<td class="a-r">사용</td>';
			}else{
				html += '	<td class="a-r">'+ param.prdtAmt.format() +'원</td>';
			}
			html += '	<td>';

			switch(param.statCd) {
			case 'N' : html += '취소불가'; break;
			case 'C' : html += '결제취소'; break;
			case 'Y' : html += '<button type="button" class="button x-small gray-line" sell-tran-no="'+param.sellTranNo+'" sell-prdt-kind-cd="'+param.sellPrdtKindCd+'">취소</button>';
			}

			html += '	</td>';
			html += '</tr>';
		});

		$('#myPurc tbody').html(html);
	}

	// 이벤트 리스트 생성
	function makeHtmlForSbcList(data) {

		var html = '';

		if (data.eventList.length == 0) return;

		$.each(data.eventList, function(i, param) {

			param.urlWin = '/mypage/myevent/detail?eventNo=' + param.eventNo;

			html += '<li>';
			html += '	<a href="#" data-no="' + param.eventNo + '" data-netfunnel="' + param.netfunnelAt + '" class="eventBtn link" title="'+ param.eventTitle +' 상세보기">';
			html += '		<p class="cate">';
			html += '			<em>'+ param.eventDivNm +'</em>';
			html += '		</p>';
			html += '		<p class="tit">'+ param.eventTitle +'</p>';
			html += '	</a>';

			// 당첨자발표일이 현재날짜와 같거나 이후일자 이고, 발표상태가 Y(당첨자발표)인 경우 결과확인 버튼 노출
			if (param.anunAt == 'Y' && param.isRsltCnfm == 'Y') {
				html += '<a href="'+ param.urlWin +'" class="button small gray-line" title="'+ param.eventTitle +'결과확인">결과확인</a>';
			}
			html += '</li>';
		});

		$('#mySbsc ul').html(html);
	}

	// 문의 리스트 생성
	function makeHtmlForInqList(data) {

		var html = '';

		if (data.inqList.length == 0) return;

		$.each(data.inqList, function(i, param) {

			param.url = '/mypage/myinquiry/detail?cd='+ param.inqLclCd + '&custInqSn='+ param.custInqSn;

			html += '<li>';
			html += '	<a href="'+ param.url +'" class="link" title="'+ param.custInqTitle +' 상세보기">';
			html += '		<p class="cate">';
			html += '			<em>'+ param.inqLclNm +'</em>';
			html += '			<span>'+ param.fstRegDt.maskDate() +'</span>';
			html += '		</p>';
			html += '		<p class="tit">'+ param.custInqTitle +'</p>';
			html += '	</a>';

			// 답변상태
			switch(param.custInqStatCd){
			case 'INQST2' :
			case 'INQST3' :
			case 'INQST4' :
			case 'INQST5' : html += '<span class="answer done">답변완료</span>'; break;
			default       : html += '<span class="answer">미답변</span>';
			}

			html += '</li>';
		});

		$('#myInq ul').html(html);
	}

</script>



<div id="myLoactionInfo" style="display: none;">
	<div class="location">
		<span>Home</span>
		<a href="/mypage" title="나의 씨네링크 페이지로 이동">나의 씨네링크</a>
	</div>
</div>

<div id="contents">

	<!-- my-megabox-main -->
	<div class="my-megabox-main">

		<div class="my-magabox-info ">
			<!-- top -->
			<div class="top2">
				
				<!-- 멤버 등급을 위한 주석 <div class="mbimg"><img src="" alt="" ></div> -->
				<div class="mb_name">안녕하세요!
					<div id="contents">
    				<span id="contents" class="mb_name" th:text="${session.loginid ?: session.kakaoname}"></span>
					</div>
				</div>
				<!--안녕하세요! session값  -->

				<div class="link">
					<a href="/mypage/myinfo?returnURL=info" title="개인정보수정 페이지로 이동">개인정보수정</a>
					<a href="#layer_before_grade" id="bfrClassSearch" class="btn-modal-open" title="지난등급 상세보기">지난등급조회</a>
				</div>

				

			</div>
			<!--// top -->

			<!-- bottom -->
			<div class="bottom2">
				<div class="items point" id="myPoint">
					<div class="tit-area">
						<p class="tit">포인트 이용내역</p>
						<a href="/mypage/point-list" class="more" title="포인트 이용내역 페이지로 이동"><i class="iconset ico-arr-right-gray">더보기</i></a>
					</div>


					<div class="change">
						<div class="save">
							<span>적립예정</span>
							<em>0 P</em>
						</div>

						<div class="del">
							<span>당월소멸예정</span>
							<em>0 P</em>
						</div>
					</div>

				</div>

				<!-- theater -->
				<div class="items theater" id="myFaverBrch">
					<div class="tit-area">
						<p class="tit">선호하는 극장</p>
						<a href="" class="more" title="선호극장 변경"><i class="iconset ico-arr-right-gray">변경</i></a>
					</div>

					<div class="list">
						<div class="no-list" style="display: none;">
							<span>선호극장</span>을  설정하세요.
						</div>
						<ol></ol>
					</div>
				</div>
				<!--// theater -->

				<!-- coupon -->
				<div class="items coupon" id="myCoupon">
					<div class="tit-area">
						<p class="tit">관람권/쿠폰</p>
						<a href="/mypage/movie-coupon" class="more"><i class="iconset ico-arr-right-gray" title="영화관람권 페이지로 이동">더보기</i></a>
					</div>

					<div class="list">
						<ul>
							<li>
								<span>영화관람권</span>
								<em>0 매</em>
							</li>
							<li>
								<span>스토어교환권</span>
								<em>0 매</em>
							</li>
							<li>
								<span>할인/제휴쿠폰</span>
								<em>0 매</em>
							</li>
						</ul>
					</div>
				</div>
				<!--// coupon -->

				<!-- 스페셜 멤버십 -->
				<div class="items special-membership" id="myMembership">

					<div class="tit-area">
						<p class="tit">스페셜 멤버십</p>
						<a href="/curation/specialcontent" class="more"><i class="iconset ico-arr-right-gray" title="스페셜멤버십 가입 페이지로 이동">더보기</i></a>
					</div>

					<!-- 스폐셜 가입 안했을 때 -->
					<div class="no-join">
						<p class="txt">가입된 스페셜 멤버십이 없습니다.</p>

						<a href="/curation/specialcontent" title="스페셜멤버십 가입 페이지로 이동">스페셜멤버십</a>
					</div>

					<!-- <div class="join">
						<div class="box">
							<img src="images/2023/01/my_dashboard_so_01.png" alt="filmsociety" />
						</div>
						<div class="box">
							<img src="images/2023/01/my_dashboard_so_02.png" alt="classic society" />
						</div>
					</div> -->
				</div>
				<!--//스페셜 멤버십 -->

			</div>
			<!--// bottom -->
		</div>
		<!--// my-magabox-info -->

		<!-- 레이어 : 지난등급조회 -->
		<section id="layer_before_grade" class="modal-layer">
			<div class="wrap passClassPop">
				<header class="layer-header">
					<h3 class="tit">지난등급조회</h3>
				</header>


				<!-- layer-before-grade -->
				<div class="layer-before-grade">
					<div class="tit"><span class="mbName"></span>님은 <em class="mbClass"></em> 입니다.</div>

					<div class="overBox">
						<div class="head">
						</div>
						<div class="body">
						</div>
					</div>

					<div class="text">
						지난 5년간의 회원 등급을 확인 하실 수 있습니다.<br>월별 승급제도는 23년 4월 부터 적용되며 당해년도 등급 <br>이력을 확인 하실 수 있습니다.
					</div>
				</div>
				<!--// layer-before-grade -->

				<button type="button" class="btn-modal-close">레이어 닫기</button>
			</div>
		</section>
		<!--// 레이어 : 지난등급조회 -->

		<!-- vip 일때만 출력 : my-stamp-mission -->
		
		<!--// vip 일때만 출력 : my-stamp-mission -->

		<!-- column -->
		<div class="column mt70">
			<!-- left -->
			<div class="col left" id="myStory">
				<div class="tit-util">
					<h2 class="tit small">나의 무비스토리</h2>

					<div class="right">
						<a href="#saw_movie_regi" class="button gray-line small btn-modal-open" w-data='600' h-data='470' title="본 영화 등록">본 영화 등록</a>
					</div>
				</div>

				<div class="box-border link-movie-story">
					<a href="/mypage/moviestory?cd=sm" title="본 영화 탭으로 이동">
						<em>0</em>
						<span>본 영화</span>
					</a>

					<a href="/mypage/moviestory?cd=one" title="관람평 탭으로 이동">
						<em>0</em>
						<span>관람평</span>
					</a>

					<a href="/mypage/moviestory?cd=lm" title="보고싶어 탭으로 이동">
						<em>0</em>
						<span>보고싶어</span>
					</a>

					<a href="/mypage/moviestory?cd=mp" title="무비포스트 탭으로 이동">
						<em>0</em>
						<span>무비포스트</span>
					</a>
				</div>
			</div>
			<!--// left -->

			<!-- right -->
			<div class="col right" id="myFaverInfo">
				<div class="tit-util">
					<h2 class="tit small">선호관람정보</h2>

					<div class="right">
						<a href="" class="button gray-line small" title="설정">설정</a>
					</div>
				</div>

				<div class="box-border favor-see">
					<ul class="dot-list gray">
						<li><span class="font-gblue mr10">내 선호장르</span></li>
						<li><span class="font-gblue mr10">내 선호시간</span></li>
					</ul>
				</div>
			</div>
			<!--// right -->
		</div>
		<!--// column -->

		<div id="myBokd">
			<div class="tit-util mt70">
				<h2 class="tit small">나의 예매내역</h2>

				<a href="/mypage/bookinglist?tab=01" class="more" title="나의 예매내역 더보기">더보기 <i class="iconset ico-arr-right-gray"></i></a>
			</div>

			<!-- my-reserve-history -->
			<div class="my-reserve-history">
				<ul>
					<li class="no-result">
						<div class="no-history-reservation">
							예매 내역이 없습니다.
						</div>
					</li>
				</ul>
			</div>
			<!--// my-reserve-history -->
		</div>

		

		<!-- column -->
		<div class="column mt70">
			<!-- left -->
			<div class="col left" id="mySbsc">
				<div class="tit-util">
					<h2 class="tit small">참여이벤트</h2>
					<a href="/mypage/myevent" class="more" title="참여이벤트 더보기">더보기 <i class="iconset ico-arr-right-gray"></i></a>
				</div>

				<div class="brd-list">
					<ul>
						<li class="no-result">
							참여한 이벤트가 없습니다.
						</li>
					</ul>
				</div>
			</div>
			<!--// left -->

			<!-- right -->
			<div class="col right" id="myInq">
				<div class="tit-util">
					<h2 class="tit small">문의내역</h2>

					<a href="/mypage/myinquiry?tab=" class="more" title="문의내역 더보기">더보기 <i class="iconset ico-arr-right-gray"></i></a>
				</div>

				<div class="brd-list">
					<ul>
						<li class="no-result">
							문의내역이 없습니다.
						</li>
					</ul>
				</div>
			</div>
			<!--// right -->
		</div>
		<!--// column -->
	</div>
	<!--// my-megabox-main -->
</div>

            </div>
        </div>
        



<section id="saw_movie_regi" class="modal-layer">
	<input type="hidden" id="isLogin" value="Y"  />
	<div class="wrap">
		<header class="layer-header">
			<h3 class="tit">본 영화 등록</h3>
		</header>

		<div class="layer-con">
			<p class="reset">발권하신 티켓 하단의 거래번호 또는 예매번호를 입력해주세요.</p>

			<div class="pop-gray mt10 mb30">
				<label for="movie_regi" class="mr10">거래번호 또는 예매번호</label>
				<input type="text" id="movie_regi" class="input-text w280px numType" maxlength="20" placeholder="숫자만 입력해 주세요" title="티켓 거래번호 입력" />
				<button class="button gray ml05" id="regBtn">등록</button>
			</div>

			<div class="box-border v1 mt30">
				<p class="tit-box">이용안내</p>

				<ul class="dot-list">
                        <li>극장에서 예매하신 내역을 본 영화(관람이력)로 등록하실 수 있습니다.</li>
                        <li>예매처를 통해 예매하신 고객님은 극장에서 발권하신 티켓 하단의 온라인 예매번호 <BR>12자리를 입력해주세요.(Yes24, 네이버, 인터파크, SKT, KT, 다음)</li>
                        <li>본 영화 등록은 관람인원수 만큼 등록가능하며, 동일 계정에 중복등록은 불가합니다.</li>
                        <li>상영시간 종료 이후 등록 가능합니다.</li>
                        <li>본 영화로 수동 등록한 내역은 이벤트 참여 및 포인트 추후 적립이 불가합니다.</li>
				</ul>
			</div>
		</div>

		<div class="btn-group-fixed">
			<button type="button" class="button purple close-layer">닫기</button>
		</div>

		<button type="button" class="btn-modal-close">레이어 닫기</button>
	</div>
</section>

<div class="quick-area">
	<a href="" class="btn-go-top" title="top">top</a>
</div>

<!-- footer -->
<footer id="footer">
    <!-- footer-top -->
    <div class="footer-top">
        <div class="inner-wrap">
            <ul class="fnb">
                <li><a href="/megaboxinfo" title="회사소개 페이지로 이동">회사소개</a></li>
                <li><a href="/recruit" title="인재채용 페이지로 이동">인재채용</a></li>
                <li><a href="/socialcontribution" title="사회공헌 페이지로 이동">사회공헌</a></li>
                <li><a href="/partner" title="제휴/광고/부대사업문의 페이지로 이동">제휴/광고/부대사업문의</a></li>
                <li><a href="/support/terms" title="이용약관 페이지로 이동">이용약관</a></li>
                <li><a href="/support/lcinfo" title="위치기반서비스 이용약관 페이지로 이동">위치기반서비스 이용약관</a></li>
                <li class="privacy"><a href="/support/privacy" title="개인정보처리방침 페이지로 이동">개인정보처리방침</a></li>
                <li><a href="https://jebo.joonganggroup.com/main.do" target="_blank" title="윤리경영 페이지로 이동">윤리경영</a></li>
            </ul>

            <a href="#layer_looking_theater" class="btn-looking-theater" title="극장찾기"><i class="iconset ico-footer-search"></i> 극장찾기</a>
        </div>
    </div>
    <!--// footer-top -->

    <!-- footer-bottom -->
    <div class="footer-bottom">
        <div class="inner-wrap">
            <div class="ci">CINELINK : Life Theater</div>

            <div class="footer-info">
                <div>
                    <address>서울특별시 성동구 왕십리로 50, 6층 (성수동1가, 씨네링크 스퀘어)</address>
                    <p>ARS 1544-0070</p>
                </div>
                <p>대표자명 윤장걸</p>
                <p>&middot; 개인정보보호책임자 공성진</p>
                <p>&middot; 사업자등록번호 211-86-59478</p>
                <p>&middot; 통신판매업신고번호 2023-서울성동-0177</p>
                <p class="copy">COPYRIGHT &copy; CINELINKJANG, Inc. All rights reserved</p>
            </div>

            <div class="footer-sns">
            	<a href="https://www.youtube.com/onmegabox" target="_blank" title="CINELINK 유튜브 페이지로 이동"><i class="iconset ico-youtubeN">유튜브</i></a>
                <a href="http://instagram.com/megaboxon" target="_blank" title="CINELINK 인스타그램 페이지로 이동"><i class="iconset ico-instagramN">인스타그램</i></a>
                <a href="https://www.facebook.com/megaboxon" target="_blank" title="CINELINK 페이스북 페이지로 이동"><i class="iconset ico-facebookN">페이스북</i></a>
                <a href="https://twitter.com/megaboxon" target="_blank" title="CINELINK 트위터 페이지로 이동"><i class="iconset ico-twitterN">트위터</i></a>
            </div>
        </div>
    </div>
    <!--// footer-bottom -->
    <div id="layer_looking_theater" class="layer-looking-theater"></div>
</footer>
<!--// footer -->

<!-- 모바일 때만 출력 -->
<div class="go-mobile">
	<a href="#" data-url="https://m.megabox.co.kr">모바일웹으로 보기 <i class="iconset ico-go-mobile"></i></a>
</div>
    </div>
    <form id="mainForm">
    </form>
</body>
</html>